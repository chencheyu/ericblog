


















<!DOCTYPE html>
<html lang="zh-TW" data-theme="light">

<head><script src="///blog.ericchen.name/livereload.js?mindelay=10&amp;v=2&amp;port=1414&amp;path=//blog.ericchen.name/livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">

<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)" />

<meta name="generator" content="Hugo 0.143.1">
<link rel="shortcut icon" type="image/x-icon" href="/imgs/icons/favicon.ico">
<link rel="icon" type="image/x-icon" href="/imgs/icons/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/imgs/icons/favicon_16x16_next.png">
<link rel="icon" type="image/png" sizes="32x32" href="/imgs/icons/favicon_32_32_next.png">
<link rel="apple-touch-icon" sizes="180x180" href="/imgs/icons/apple_touch_icon_next.png">
<meta itemprop="name" content="Microprocessor Term Report.md" />
<meta itemprop="description" content="保持简单的易用性和强大的功能。" />
<meta name="description" content="保持简单的易用性和强大的功能。" />


<meta itemprop="datePublished" ZgotmplZ />


<meta itemprop="dateModified" ZgotmplZ />





<meta itemprop="image" content="//localhost:1414/imgs/hugo_next_avatar.png" />
<meta itemprop="keywords" content="CS/Embedded" />


<meta property="og:type" content="article" />
<meta property="og:title" content="Microprocessor Term Report.md" />
<meta property="og:description" content="保持简单的易用性和强大的功能。" />
<meta property="og:image" content="/imgs/hugo_next_avatar.png" />
<meta property="og:image:width" content="312" />
<meta property="og:image:height" content="312" />
<meta property="og:image:type" content="image/jpeg/png/svg/jpg" />
<meta property="og:url" content="//localhost:1414///blog.ericchen.name/post/96261f31-fdc3-45f8-ad11-bbc09aeee70c/"/>
<meta property="og:site_name" content="哲佑碎碎念" />
<meta property="og:locale" content="zh-TW"/>

<meta property="article:author" content="EricChen" />
<meta property="article:published_time" content="2018-11-14 00:00:00 &#43;0000 UTC" />
<meta property="article:modified_time" content="2018-11-14 00:00:00 &#43;0000 UTC" />
  













  
  <link type="text/css" rel="stylesheet" href="//localhost:1414///blog.ericchen.name/js/3rd/font-awesome/6.7.2/css/all.min.css" /> 

  
  <link type="text/css" rel="stylesheet" href="//localhost:1414///blog.ericchen.name/js/3rd/animate.css/3.1.1/animate.min.css" /> 

  
  <link type="text/css" rel="stylesheet" href="//localhost:1414///blog.ericchen.name/js/3rd/viewerjs/1.11.6/viewer.min.css" /> 








<link rel="stylesheet" href="///blog.ericchen.name/css/main.css?=1741873171">


<style type="text/css">
  .post-footer hr:after {
    content: "";
  }

  .flinks-list-footer hr:after {
    content: "";
  }

  
  
</style>




  
<script type="text/javascript">
(function(){
  localDB = {
    set: function (key, value, ttl) {
      if (ttl === 0) return;
      const now = new Date();
      const expiryDay = ttl * 86400000;
      const item = {
        value: value,
        expiry: now.getTime() + expiryDay
      };
      localStorage.setItem(key, JSON.stringify(item));
    },
    get: function (key) {
      const itemStr = localStorage.getItem(key);
      if (!itemStr) {
        return undefined;
      }
  
      const item = JSON.parse(itemStr);
      const now = new Date();
  
      if (now.getTime() > item.expiry) {
        localStorage.removeItem(key);
        return undefined;
      }
      return item.value;
    }
  };

  theme = {
    active: function() {
      const localState = localDB.get('theme');
      if (localState == undefined) return;
      theme.toggle(localState);
      window.matchMedia("(prefers-color-scheme: dark)").addListener(function (evt) {
        theme.toggle(evt.matches ? 'dark' : 'light');
      });
    },

    toggle: function (theme) {
      document.documentElement.setAttribute('data-theme',  theme);
      localDB.set('theme', theme, 2);
      
      const iframe = document.querySelector('iframe.giscus-frame');
      if (iframe) {
        const config = { setConfig: { theme: theme } };
        iframe.contentWindow.postMessage({ giscus: config }, 'https://giscus.app');
      }
    }
  };

  theme.active();
})(window);
</script>




  <script type="text/javascript">
document.addEventListener('DOMContentLoaded', () => {
  var script = document.createElement('script');
    
  script.charset = "UTF-8";
  script.src     = "https:\/\/busuanzi.ibruce.info\/busuanzi\/2.3\/busuanzi.pure.mini.js";
  script.async   = false
  script.defer   = true
  
  document.head.appendChild(script);
  script.onload = function() {
    NexT.utils.fmtBusuanzi();
  }
});
</script>
  



  <title>Microprocessor Term Report.md - 哲佑碎碎念</title>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage"  class="use-motion" >
  <div class="headband"></div>
  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner">
        
<div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">
    

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">哲佑碎碎念</h1>
      <i class="logo-line"></i>
    </a>
    
      <p class="site-subtitle" itemprop="description">哲佑碎碎念</p>
    
    
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
      
      <i class="fa fa-search fa-fw fa-lg"></i>
      
    </div>
  </div>
</div>


<nav class="site-nav">
  <ul class="main-menu menu">    
  
    
    <li class="menu-item menu-item-home">
      <a href="/blog.ericchen.name/" class=" hvr-icon-pulse " rel="section">
        <i class="fa fa-home hvr-icon"></i>首頁
        
        
      </a>
      
    </li>
  
    
    <li class="menu-item menu-item-about">
      <a href="/blog.ericchen.name/about.html" class=" hvr-icon-pulse " rel="section">
        <i class="fa fa-user hvr-icon"></i>關於
        
        
      </a>
      
    </li>
  
    
    <li class="menu-item menu-item-flinks">
      <a href="/blog.ericchen.name/flinks.html" class=" hvr-icon-pulse " rel="section">
        <i class="fa fa-thumbs-up hvr-icon"></i>友情
        
        
      </a>
      
    </li>
  
    
    <li class="menu-item menu-item-archives">
      <a href="/blog.ericchen.name/archives/" class=" hvr-icon-pulse " rel="section">
        <i class="fa fa-archive hvr-icon"></i>歸檔
        
        
      </a>
      
    </li>
  
    
    <li class="menu-item menu-item-categories">
      <a href="/blog.ericchen.name/tags/" class=" hvr-icon-pulse " rel="section">
        <i class="fa fa-tags hvr-icon"></i>標籤
        
        
      </a>
      
    </li>
      

  
    <li class="menu-item menu-item-search">
      <a role="button" class="popup-trigger hvr-icon-pulse">
        <i class="fa fa-search fa-fw hvr-icon"></i>搜索
      </a>
    </li>
  
  </ul>
</nav>

  <div class="search-pop-overlay">
    <div class="popup search-popup">
      
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>
      
    </div>
  </div>

      </div>
      
      
      <div class="toggle sidebar-toggle" role="button">
  <span class="toggle-line"></span>
  <span class="toggle-line"></span>
  <span class="toggle-line"></span>
</div>

<aside class="sidebar">
  <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
    <ul class="sidebar-nav">
      <li class="sidebar-nav-toc">
        文章目錄
      </li>
      <li class="sidebar-nav-overview">
        站點概覽
      </li>
    </ul>
    <div class="sidebar-panel-container">
      
      <div class="post-toc-wrap sidebar-panel">
        <div class="post-toc animated"><nav id="TableOfContents">
  <ul>
    <li><a href="#目的">目的</a></li>
    <li><a href="#lcd版">lcd版</a>
      <ul>
        <li><a href="#使用零件">使用零件</a></li>
        <li><a href="#應用技術">應用技術</a></li>
      </ul>
    </li>
    <li><a href="#uart版">Uart版</a>
      <ul>
        <li><a href="#我幻想他應該長這樣">我幻想他應該長這樣</a></li>
        <li><a href="#malloc">malloc</a></li>
        <li><a href="#記憶體超界">記憶體超界</a></li>
        <li><a href="#uart-buffer">Uart buffer</a></li>
        <li><a href="#使用零件-1">使用零件</a></li>
      </ul>
    </li>
    <li><a href="#修課心得">修課心得</a></li>
  </ul>
</nav></div>
      </div>
      
      <div class="site-overview-wrap sidebar-panel">
        
<div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  
    <img class="site-author-image" itemprop="image" alt="EricChen"
    src="/imgs/img-lazy-loading.gif" data-src="/imgs/hugo_next_avatar.png">
  
  <p class="site-author-name" itemprop="name">EricChen</p>
  <div class="site-description" itemprop="description">保持简单的易用性和强大的功能。</div>
</div>


<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
    <div class="site-state-item site-state-posts">
      <a href="/archives/">
        <span class="site-state-item-count">74</span>
        <span class="site-state-item-name">日誌</span>
      </a>
    </div>
    <div class="site-state-item site-state-categories">
      <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分類</span>
      </a>
    </div>
    <div class="site-state-item site-state-tags">
      <a href="/tags/">
        <span class="site-state-item-count">47</span>
        <span class="site-state-item-name">標籤</span>
      </a>
    </div>
  </nav>
</div>


<div class="links-of-social site-overview-item animated">






  <span class="links-of-social-item">
    <a href="https://gitlab.com/joe1231231218" title="Gitlab → https://gitlab.com/joe1231231218" rel="noopener"  class="hvr-icon-pulse"  target="_blank">
      
      <i class="fab fa-gitlab fa-fw  hvr-icon "></i>
      
      
      Gitlab
      
    </a>
  </span>





  <span class="links-of-social-item">
    <a href="mailto:connection@ericchen.name" title="E-Mail → mailto:connection@ericchen.name" rel="noopener"  class="hvr-icon-pulse"  target="_blank">
      
      <i class="fa fa-envelope fa-fw  hvr-icon "></i>
      
      
      E-Mail
      
    </a>
  </span>

</div>



<div class="cc-license animated" itemprop="license">
  <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank" title="共享知識">
    <img src="/imgs/img-lazy-loading.gif" data-src="/imgs/cc/big/by_nc_sa.svg" alt="共享知識">
  </a>
</div>




<div class="links-of-blogroll site-overview-item animated">
  <div class="links-of-blogroll-title">
    
    <i class="fa fa-globe fa-fw"></i>
    
    友情链接
  </div>
  <ul class="links-of-blogroll-list">
    
    
    
    
    <li class="links-of-blogroll-item">
      <a href="https://gitee.com/hugo-next/hugo-theme-next" title="https://gitee.com/hugo-next/hugo-theme-next" target="_blank">Hugo-NexT</a>
    </li>
    
    
    
    
    <li class="links-of-blogroll-item">
      <a href="https://lisenhui.cn" title="https://lisenhui.cn" target="_blank">凡梦星尘空间站</a>
    </li>
    
  </ul>
</div>

        
        
        
      </div>
    </div>
  </div>

  
    
<div id="siteinfo-card-widget" class="sidebar-card-widget">
  <div class="item-headline">
    <i class="fas fa-chart-line"></i>
    <span>網站資訊</span>
  </div>
  <div class="siteinfo">
    <div class="siteinfo-item">
      <div class="item-name"><i class="fa-solid fa-calendar-check"></i>已運行：</div>
      <div class="item-count" id="runTimes" data-publishdate="0001-01-01 00:00:00 &#43;0000 UTC"></div>
    </div>
    
    
    <div class="siteinfo-item">
      <div class="item-name">
        <i class="fas fa fa-user"></i>總訪客數：
      </div>
      <div class="item-count" id="busuanzi_value_site_uv"><i class="fa fa-sync fa-spin"></i></div>
    </div>
    <div class="siteinfo-item">
      <div class="item-name">
        <i class="fas fa fa-eye"></i>頁面瀏覽：
      </div>
      <div class="item-count" id="busuanzi_value_site_pv"><i class="fa fa-sync fa-spin"></i></div>
    </div> 
        
        
    
    <div class="siteinfo-item">
      <div class="item-name"><i class="fa fa-font"></i>總字數：</div>
      <div class="item-count" id="wordsCount" data-count="98389"></div>
    </div>
    <div class="siteinfo-item">
      <div class="item-name"><i class="fa fa-mug-hot"></i>閱讀約：</div>
      <div class="item-count" id="readTimes" data-times="245"></div>
    </div>
    <div class="siteinfo-item">
      <div class="item-name"><i class="fa fa-clock-rotate-left"></i>最後更新於：</div>
      <div class="item-count" id="last-push-date" data-lastpushdate="2025-02-28 00:00:00 &#43;0000 UTC"></div>
    </div>
  </div>
</div>
  

  
</aside>
<div class="sidebar-dimmer"></div>

      
    </header>
    
    <div class="tool-buttons" >
  
  
  <div id="goto-i18n-translate" class="button"  title="多語言翻譯">
    <i class="fas fa-globe"></i>
  </div> 
  
  <div id="toggle-theme" class="button" title="深淺模式切換">
    <i class="fas fa-adjust"></i>
  </div>
  
  <div class="back-to-top" role="button" title="返回頂部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
 
</div>


  <div class="reading-progress-bar"></div>






<a href="https://gitlab.com/joe1231231218" rel="noopener external nofollow noreferrer" target="_blank" title="Follow me on GitHub" class="exturl github-corner">
  <svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg>
</a>





<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>
    <div class="main-inner post posts-expand">
      
      
  <div class="post-block">
  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    
    <link itemprop="mainEntityOfPage" href="//localhost:1414///blog.ericchen.name/post/96261f31-fdc3-45f8-ad11-bbc09aeee70c/">
    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/imgs/hugo_next_avatar.png">
      <meta itemprop="name" content="EricChen">
    </span>
    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EricChen">
      <meta itemprop="description" content="保持简单的易用性和强大的功能。">
    </span>
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Microprocessor Term Report.md">
      <meta itemprop="description" content="目的

我致敬了google的小恐龍

先示範
lcd版




  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165


#include &lt;stdlib.h&gt;
#include &#34;WT59F064.h&#34;
#include &#34;lcd.h&#34;
#include &#34;keyboard_io.h&#34;

int cactus[2]={0xffff,0xffff},djmp=0,score=0,gameover=0;

char trans(int i){
	if(i&lt;10){
		return &#39;0&#39;&#43;i;
	}else{
		return &#39;A&#39;&#43;(i-10);
	}
}

void ISR_forward(){
	TIM0_CNT = 0;
	TIM0_OFIF |= BIT4;
	if(gameover==1){
		return;
	}
	if(TIM0_MAT0A&gt;100){
		TIM0_MAT0A-=1;
	}
	WriteIns(0x0100);
	if(cactus[0]==0){
		cactus[0]=0xffff;
	}else if(cactus[0]&lt;=0x0f00){
		cactus[0]-=0x0100;
	}
	if(cactus[1]==0){
		cactus[1]=0xffff;
	}else if(cactus[1]&lt;=0x0f00){
		cactus[1]-=0x0100;
	}

	if(djmp&gt;0){
		WriteIns(0x8300);
		WriteData(&#39;D&#39;);
		--djmp;
	}else{
		WriteIns(0xc300);
		WriteData(&#39;D&#39;);
	}

	if(cactus[0]&lt;0x0f00){
		WriteIns(0xc000&#43;cactus[0]);
		WriteData(&#39;C&#39;);
	}
	if(cactus[1]&lt;0x0f00){
		WriteIns(0xc000&#43;cactus[1]);
		WriteData(&#39;C&#39;);
	}

	WriteIns(0x8c00);
	WriteData(trans(((score&amp;0xf000)&gt;&gt;12)));
	WriteData(trans(((score&amp;0x0f00)&gt;&gt;8)));
	WriteData(trans(((score&amp;0x00f0)&gt;&gt;4)));
	WriteData(trans((score&amp;0x000f)));
	&#43;&#43;score;
	return;
}

void Timer0_Initial(void)
{
	TIM0_CTL |= BITF;  // Timer Enable
	TIM0_CNT = 0; //incremented every (pscl &#43; 1) of trigger source
	TIM0_PSCL = 23999; //°£ÀW­È
	TIM0_MAT0A = 1000; //Match mat0a register for output match mode
	TIM0_IE |= BIT4; // Interrupt enable for mat0a
	IE0_0 |= BIT3;  // 1: Enable Timer 0 interrupt
	TIM0_CTL |= BIT0; // Timer Start
	return;
}

void Timer1_Initial(void)
{
	TIM1_CTL |= BITF; // Timer Enable
	TIM1_CNT = 0; //incremented every (pscl &#43; 1) of trigger source
	TIM1_PSCL = 23999; //°£ÀW­È
	TIM1_CTL |= BIT0;
	return;
}


void IntInitial(void)
{
	initIntr();
	GIE_ENABLE();
	return;
}

void PWM_Initial(void)
{
	GPIO_ACT_PD = 0xFFFB;//GPIO port D.2 enables the PWM function.
	PWM4_PWM7_BASE_CLK = 0x3; 	// MUC Clock = 24MHz  =&gt; 2MHz
	PWM4_PWM7_ENABLE = 0x40; 	//PWM6 enable
	return;
}

void quiet_PWM6(){
	PWM6_CLOCK=10;
	PWM6_PERIOD=0;
	PWM6_DUTY=0;
	return;
}

int main(){
	System_Control_00 = ( System_Control_00 | 0x000E);
	// High speed external Xtal clk selection(011:24MHz); 1: HSE oscillator on
	System_Control_04 = ( System_Control_04 | 0x0001);
	// 1: Select HSE as system clock source
	InitialLCD();			// LCD initial
	IntInitial(); 			// MCU interrupt initial
	PWM_Initial();
	Timer0_Initial();
	Timer1_Initial();

	quiet_PWM6();
	while(1){
		KeyScan();
		if(GetKeyScanV()==0xE7 &amp;&amp; djmp&lt;=0 ){
			djmp=3;
			PWM6_CLOCK=10;
			PWM6_PERIOD=346;
			PWM6_DUTY=173;
			delay1(65534);
			quiet_PWM6();


		}else if(GetKeyScanV()==0xEB){
			gameover=1;
			while(1){
				if(GetKeyScanV()== 0xED){
					gameover=0;
					break;
				}
				KeyScan();
			}
		}

		if(djmp&lt;=0){
			if(cactus[0]==0x0300 || cactus[1]==0x0300){
				WriteIns(0x8300);
				WriteString(&#34;game over&#34;);
				gameover=1;
				while(1){;}
			}
		}
		if(cactus[0]&gt;0x1000){
			if((TIM1_CNT%51)&lt;3){
				cactus[0]=0x0f00;
			}
		}
		if(cactus[1]&gt;0x1000 &amp;&amp; cactus[0]!=0x0f00){
			if((TIM1_CNT%51)&lt;17){
				cactus[1]=0x0f00;
			}
		}
		if(TIM1_CNT&gt;0xefff){
			TIM1_CNT=0;
		}
	}
	return 0;
}



使用零件

LCD,中斷">
    </span>
    
    <header class="post-header">
      
 <h1  class="post-title" itemprop="name headline">
  
  
  Microprocessor Term Report.md
  
  
  <a href="https://github.com/chencheyu/chencheyu.github.iopost/4a0d87e7-f7eb-4ccd-aed8-380e0586e246/index.md" rel="noopener external nofollow noreferrer" target="_blank" class="exturl post-edit-link" title="編輯"><i class="fa fa-pen-nib"></i></a>
  
  
   </h1> 

<div class="post-meta-container">
  <div class="post-meta-items">
    


<span class="post-meta-item">
  <span class="post-meta-item-icon">
    <i class="fas fa-solid fa-calendar"></i>
  </span>
  <span class="post-meta-item-text" title="發表於">
    發表於：
  </span>
  <time title="創建時間：2018-11-14T00:00:00&#43;00:00 CST" itemprop="dateCreated datePublished" datetime="2018-11-14 00:00:00 &#43;0000 UTC">
    2018-11-14
  </time>
</span>

    


    


        
  </div>
  
  <div class="post-meta-items">
    
<span class="post-meta-item" title="字數">
  <span class="post-meta-item-icon">
    <i class="fas fa-solid fa-file-word"></i>
  </span>
  <span class="post-meta-item-text">字數：</span>
  <span>1951</span>
</span>

    
<span class="post-meta-item" title="閱讀">
  <span class="post-meta-item-icon">
    <i class="fas fa-solid fa-clock"></i>
  </span>
  <span class="post-meta-item-text">閱讀：&asymp;</span>
  <span>4分鐘</span>
</span>


    


<span class="post-meta-item" title="瀏覽">
  <span class="post-meta-item-icon">
    <i class="fas fa-solid fa-eye"></i>
  </span>
  <span class="post-meta-item-text">
  瀏覽：
  </span>
  <span id="pageview-count" data-path="/blog.ericchen.name/post/96261f31-fdc3-45f8-ad11-bbc09aeee70c/">
    <i class="fa fa-sync fa-spin"></i>
  </span>
</span>

    
  </div>
  
</div>

    </header>
    
    <div class="post-body  autonumber " itemprop="articleBody">
      

  
  
  
  
  
  
  
  
  <h2 id="目的">目的
<a class="header-anchor" href="#%e7%9b%ae%e7%9a%84"></a>
</h2><p>我致敬了google的小恐龍
<img src="/imgs/img-lazy-loading.gif" data-src="../d45c04bb-198e-4021-8c97-53b536429e9b.jpg" alt=""  /></p>
<p>先示範</p>
<h2 id="lcd版">lcd版
<a class="header-anchor" href="#lcd%e7%89%88"></a>
</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-0-1"><a class="lnlinks" href="#hl-0-1">  1</a>
</span><span class="lnt" id="hl-0-2"><a class="lnlinks" href="#hl-0-2">  2</a>
</span><span class="lnt" id="hl-0-3"><a class="lnlinks" href="#hl-0-3">  3</a>
</span><span class="lnt" id="hl-0-4"><a class="lnlinks" href="#hl-0-4">  4</a>
</span><span class="lnt" id="hl-0-5"><a class="lnlinks" href="#hl-0-5">  5</a>
</span><span class="lnt" id="hl-0-6"><a class="lnlinks" href="#hl-0-6">  6</a>
</span><span class="lnt" id="hl-0-7"><a class="lnlinks" href="#hl-0-7">  7</a>
</span><span class="lnt" id="hl-0-8"><a class="lnlinks" href="#hl-0-8">  8</a>
</span><span class="lnt" id="hl-0-9"><a class="lnlinks" href="#hl-0-9">  9</a>
</span><span class="lnt" id="hl-0-10"><a class="lnlinks" href="#hl-0-10"> 10</a>
</span><span class="lnt" id="hl-0-11"><a class="lnlinks" href="#hl-0-11"> 11</a>
</span><span class="lnt" id="hl-0-12"><a class="lnlinks" href="#hl-0-12"> 12</a>
</span><span class="lnt" id="hl-0-13"><a class="lnlinks" href="#hl-0-13"> 13</a>
</span><span class="lnt" id="hl-0-14"><a class="lnlinks" href="#hl-0-14"> 14</a>
</span><span class="lnt" id="hl-0-15"><a class="lnlinks" href="#hl-0-15"> 15</a>
</span><span class="lnt" id="hl-0-16"><a class="lnlinks" href="#hl-0-16"> 16</a>
</span><span class="lnt" id="hl-0-17"><a class="lnlinks" href="#hl-0-17"> 17</a>
</span><span class="lnt" id="hl-0-18"><a class="lnlinks" href="#hl-0-18"> 18</a>
</span><span class="lnt" id="hl-0-19"><a class="lnlinks" href="#hl-0-19"> 19</a>
</span><span class="lnt" id="hl-0-20"><a class="lnlinks" href="#hl-0-20"> 20</a>
</span><span class="lnt" id="hl-0-21"><a class="lnlinks" href="#hl-0-21"> 21</a>
</span><span class="lnt" id="hl-0-22"><a class="lnlinks" href="#hl-0-22"> 22</a>
</span><span class="lnt" id="hl-0-23"><a class="lnlinks" href="#hl-0-23"> 23</a>
</span><span class="lnt" id="hl-0-24"><a class="lnlinks" href="#hl-0-24"> 24</a>
</span><span class="lnt" id="hl-0-25"><a class="lnlinks" href="#hl-0-25"> 25</a>
</span><span class="lnt" id="hl-0-26"><a class="lnlinks" href="#hl-0-26"> 26</a>
</span><span class="lnt" id="hl-0-27"><a class="lnlinks" href="#hl-0-27"> 27</a>
</span><span class="lnt" id="hl-0-28"><a class="lnlinks" href="#hl-0-28"> 28</a>
</span><span class="lnt" id="hl-0-29"><a class="lnlinks" href="#hl-0-29"> 29</a>
</span><span class="lnt" id="hl-0-30"><a class="lnlinks" href="#hl-0-30"> 30</a>
</span><span class="lnt" id="hl-0-31"><a class="lnlinks" href="#hl-0-31"> 31</a>
</span><span class="lnt" id="hl-0-32"><a class="lnlinks" href="#hl-0-32"> 32</a>
</span><span class="lnt" id="hl-0-33"><a class="lnlinks" href="#hl-0-33"> 33</a>
</span><span class="lnt" id="hl-0-34"><a class="lnlinks" href="#hl-0-34"> 34</a>
</span><span class="lnt" id="hl-0-35"><a class="lnlinks" href="#hl-0-35"> 35</a>
</span><span class="lnt" id="hl-0-36"><a class="lnlinks" href="#hl-0-36"> 36</a>
</span><span class="lnt" id="hl-0-37"><a class="lnlinks" href="#hl-0-37"> 37</a>
</span><span class="lnt" id="hl-0-38"><a class="lnlinks" href="#hl-0-38"> 38</a>
</span><span class="lnt" id="hl-0-39"><a class="lnlinks" href="#hl-0-39"> 39</a>
</span><span class="lnt" id="hl-0-40"><a class="lnlinks" href="#hl-0-40"> 40</a>
</span><span class="lnt" id="hl-0-41"><a class="lnlinks" href="#hl-0-41"> 41</a>
</span><span class="lnt" id="hl-0-42"><a class="lnlinks" href="#hl-0-42"> 42</a>
</span><span class="lnt" id="hl-0-43"><a class="lnlinks" href="#hl-0-43"> 43</a>
</span><span class="lnt" id="hl-0-44"><a class="lnlinks" href="#hl-0-44"> 44</a>
</span><span class="lnt" id="hl-0-45"><a class="lnlinks" href="#hl-0-45"> 45</a>
</span><span class="lnt" id="hl-0-46"><a class="lnlinks" href="#hl-0-46"> 46</a>
</span><span class="lnt" id="hl-0-47"><a class="lnlinks" href="#hl-0-47"> 47</a>
</span><span class="lnt" id="hl-0-48"><a class="lnlinks" href="#hl-0-48"> 48</a>
</span><span class="lnt" id="hl-0-49"><a class="lnlinks" href="#hl-0-49"> 49</a>
</span><span class="lnt" id="hl-0-50"><a class="lnlinks" href="#hl-0-50"> 50</a>
</span><span class="lnt" id="hl-0-51"><a class="lnlinks" href="#hl-0-51"> 51</a>
</span><span class="lnt" id="hl-0-52"><a class="lnlinks" href="#hl-0-52"> 52</a>
</span><span class="lnt" id="hl-0-53"><a class="lnlinks" href="#hl-0-53"> 53</a>
</span><span class="lnt" id="hl-0-54"><a class="lnlinks" href="#hl-0-54"> 54</a>
</span><span class="lnt" id="hl-0-55"><a class="lnlinks" href="#hl-0-55"> 55</a>
</span><span class="lnt" id="hl-0-56"><a class="lnlinks" href="#hl-0-56"> 56</a>
</span><span class="lnt" id="hl-0-57"><a class="lnlinks" href="#hl-0-57"> 57</a>
</span><span class="lnt" id="hl-0-58"><a class="lnlinks" href="#hl-0-58"> 58</a>
</span><span class="lnt" id="hl-0-59"><a class="lnlinks" href="#hl-0-59"> 59</a>
</span><span class="lnt" id="hl-0-60"><a class="lnlinks" href="#hl-0-60"> 60</a>
</span><span class="lnt" id="hl-0-61"><a class="lnlinks" href="#hl-0-61"> 61</a>
</span><span class="lnt" id="hl-0-62"><a class="lnlinks" href="#hl-0-62"> 62</a>
</span><span class="lnt" id="hl-0-63"><a class="lnlinks" href="#hl-0-63"> 63</a>
</span><span class="lnt" id="hl-0-64"><a class="lnlinks" href="#hl-0-64"> 64</a>
</span><span class="lnt" id="hl-0-65"><a class="lnlinks" href="#hl-0-65"> 65</a>
</span><span class="lnt" id="hl-0-66"><a class="lnlinks" href="#hl-0-66"> 66</a>
</span><span class="lnt" id="hl-0-67"><a class="lnlinks" href="#hl-0-67"> 67</a>
</span><span class="lnt" id="hl-0-68"><a class="lnlinks" href="#hl-0-68"> 68</a>
</span><span class="lnt" id="hl-0-69"><a class="lnlinks" href="#hl-0-69"> 69</a>
</span><span class="lnt" id="hl-0-70"><a class="lnlinks" href="#hl-0-70"> 70</a>
</span><span class="lnt" id="hl-0-71"><a class="lnlinks" href="#hl-0-71"> 71</a>
</span><span class="lnt" id="hl-0-72"><a class="lnlinks" href="#hl-0-72"> 72</a>
</span><span class="lnt" id="hl-0-73"><a class="lnlinks" href="#hl-0-73"> 73</a>
</span><span class="lnt" id="hl-0-74"><a class="lnlinks" href="#hl-0-74"> 74</a>
</span><span class="lnt" id="hl-0-75"><a class="lnlinks" href="#hl-0-75"> 75</a>
</span><span class="lnt" id="hl-0-76"><a class="lnlinks" href="#hl-0-76"> 76</a>
</span><span class="lnt" id="hl-0-77"><a class="lnlinks" href="#hl-0-77"> 77</a>
</span><span class="lnt" id="hl-0-78"><a class="lnlinks" href="#hl-0-78"> 78</a>
</span><span class="lnt" id="hl-0-79"><a class="lnlinks" href="#hl-0-79"> 79</a>
</span><span class="lnt" id="hl-0-80"><a class="lnlinks" href="#hl-0-80"> 80</a>
</span><span class="lnt" id="hl-0-81"><a class="lnlinks" href="#hl-0-81"> 81</a>
</span><span class="lnt" id="hl-0-82"><a class="lnlinks" href="#hl-0-82"> 82</a>
</span><span class="lnt" id="hl-0-83"><a class="lnlinks" href="#hl-0-83"> 83</a>
</span><span class="lnt" id="hl-0-84"><a class="lnlinks" href="#hl-0-84"> 84</a>
</span><span class="lnt" id="hl-0-85"><a class="lnlinks" href="#hl-0-85"> 85</a>
</span><span class="lnt" id="hl-0-86"><a class="lnlinks" href="#hl-0-86"> 86</a>
</span><span class="lnt" id="hl-0-87"><a class="lnlinks" href="#hl-0-87"> 87</a>
</span><span class="lnt" id="hl-0-88"><a class="lnlinks" href="#hl-0-88"> 88</a>
</span><span class="lnt" id="hl-0-89"><a class="lnlinks" href="#hl-0-89"> 89</a>
</span><span class="lnt" id="hl-0-90"><a class="lnlinks" href="#hl-0-90"> 90</a>
</span><span class="lnt" id="hl-0-91"><a class="lnlinks" href="#hl-0-91"> 91</a>
</span><span class="lnt" id="hl-0-92"><a class="lnlinks" href="#hl-0-92"> 92</a>
</span><span class="lnt" id="hl-0-93"><a class="lnlinks" href="#hl-0-93"> 93</a>
</span><span class="lnt" id="hl-0-94"><a class="lnlinks" href="#hl-0-94"> 94</a>
</span><span class="lnt" id="hl-0-95"><a class="lnlinks" href="#hl-0-95"> 95</a>
</span><span class="lnt" id="hl-0-96"><a class="lnlinks" href="#hl-0-96"> 96</a>
</span><span class="lnt" id="hl-0-97"><a class="lnlinks" href="#hl-0-97"> 97</a>
</span><span class="lnt" id="hl-0-98"><a class="lnlinks" href="#hl-0-98"> 98</a>
</span><span class="lnt" id="hl-0-99"><a class="lnlinks" href="#hl-0-99"> 99</a>
</span><span class="lnt" id="hl-0-100"><a class="lnlinks" href="#hl-0-100">100</a>
</span><span class="lnt" id="hl-0-101"><a class="lnlinks" href="#hl-0-101">101</a>
</span><span class="lnt" id="hl-0-102"><a class="lnlinks" href="#hl-0-102">102</a>
</span><span class="lnt" id="hl-0-103"><a class="lnlinks" href="#hl-0-103">103</a>
</span><span class="lnt" id="hl-0-104"><a class="lnlinks" href="#hl-0-104">104</a>
</span><span class="lnt" id="hl-0-105"><a class="lnlinks" href="#hl-0-105">105</a>
</span><span class="lnt" id="hl-0-106"><a class="lnlinks" href="#hl-0-106">106</a>
</span><span class="lnt" id="hl-0-107"><a class="lnlinks" href="#hl-0-107">107</a>
</span><span class="lnt" id="hl-0-108"><a class="lnlinks" href="#hl-0-108">108</a>
</span><span class="lnt" id="hl-0-109"><a class="lnlinks" href="#hl-0-109">109</a>
</span><span class="lnt" id="hl-0-110"><a class="lnlinks" href="#hl-0-110">110</a>
</span><span class="lnt" id="hl-0-111"><a class="lnlinks" href="#hl-0-111">111</a>
</span><span class="lnt" id="hl-0-112"><a class="lnlinks" href="#hl-0-112">112</a>
</span><span class="lnt" id="hl-0-113"><a class="lnlinks" href="#hl-0-113">113</a>
</span><span class="lnt" id="hl-0-114"><a class="lnlinks" href="#hl-0-114">114</a>
</span><span class="lnt" id="hl-0-115"><a class="lnlinks" href="#hl-0-115">115</a>
</span><span class="lnt" id="hl-0-116"><a class="lnlinks" href="#hl-0-116">116</a>
</span><span class="lnt" id="hl-0-117"><a class="lnlinks" href="#hl-0-117">117</a>
</span><span class="lnt" id="hl-0-118"><a class="lnlinks" href="#hl-0-118">118</a>
</span><span class="lnt" id="hl-0-119"><a class="lnlinks" href="#hl-0-119">119</a>
</span><span class="lnt" id="hl-0-120"><a class="lnlinks" href="#hl-0-120">120</a>
</span><span class="lnt" id="hl-0-121"><a class="lnlinks" href="#hl-0-121">121</a>
</span><span class="lnt" id="hl-0-122"><a class="lnlinks" href="#hl-0-122">122</a>
</span><span class="lnt" id="hl-0-123"><a class="lnlinks" href="#hl-0-123">123</a>
</span><span class="lnt" id="hl-0-124"><a class="lnlinks" href="#hl-0-124">124</a>
</span><span class="lnt" id="hl-0-125"><a class="lnlinks" href="#hl-0-125">125</a>
</span><span class="lnt" id="hl-0-126"><a class="lnlinks" href="#hl-0-126">126</a>
</span><span class="lnt" id="hl-0-127"><a class="lnlinks" href="#hl-0-127">127</a>
</span><span class="lnt" id="hl-0-128"><a class="lnlinks" href="#hl-0-128">128</a>
</span><span class="lnt" id="hl-0-129"><a class="lnlinks" href="#hl-0-129">129</a>
</span><span class="lnt" id="hl-0-130"><a class="lnlinks" href="#hl-0-130">130</a>
</span><span class="lnt" id="hl-0-131"><a class="lnlinks" href="#hl-0-131">131</a>
</span><span class="lnt" id="hl-0-132"><a class="lnlinks" href="#hl-0-132">132</a>
</span><span class="lnt" id="hl-0-133"><a class="lnlinks" href="#hl-0-133">133</a>
</span><span class="lnt" id="hl-0-134"><a class="lnlinks" href="#hl-0-134">134</a>
</span><span class="lnt" id="hl-0-135"><a class="lnlinks" href="#hl-0-135">135</a>
</span><span class="lnt" id="hl-0-136"><a class="lnlinks" href="#hl-0-136">136</a>
</span><span class="lnt" id="hl-0-137"><a class="lnlinks" href="#hl-0-137">137</a>
</span><span class="lnt" id="hl-0-138"><a class="lnlinks" href="#hl-0-138">138</a>
</span><span class="lnt" id="hl-0-139"><a class="lnlinks" href="#hl-0-139">139</a>
</span><span class="lnt" id="hl-0-140"><a class="lnlinks" href="#hl-0-140">140</a>
</span><span class="lnt" id="hl-0-141"><a class="lnlinks" href="#hl-0-141">141</a>
</span><span class="lnt" id="hl-0-142"><a class="lnlinks" href="#hl-0-142">142</a>
</span><span class="lnt" id="hl-0-143"><a class="lnlinks" href="#hl-0-143">143</a>
</span><span class="lnt" id="hl-0-144"><a class="lnlinks" href="#hl-0-144">144</a>
</span><span class="lnt" id="hl-0-145"><a class="lnlinks" href="#hl-0-145">145</a>
</span><span class="lnt" id="hl-0-146"><a class="lnlinks" href="#hl-0-146">146</a>
</span><span class="lnt" id="hl-0-147"><a class="lnlinks" href="#hl-0-147">147</a>
</span><span class="lnt" id="hl-0-148"><a class="lnlinks" href="#hl-0-148">148</a>
</span><span class="lnt" id="hl-0-149"><a class="lnlinks" href="#hl-0-149">149</a>
</span><span class="lnt" id="hl-0-150"><a class="lnlinks" href="#hl-0-150">150</a>
</span><span class="lnt" id="hl-0-151"><a class="lnlinks" href="#hl-0-151">151</a>
</span><span class="lnt" id="hl-0-152"><a class="lnlinks" href="#hl-0-152">152</a>
</span><span class="lnt" id="hl-0-153"><a class="lnlinks" href="#hl-0-153">153</a>
</span><span class="lnt" id="hl-0-154"><a class="lnlinks" href="#hl-0-154">154</a>
</span><span class="lnt" id="hl-0-155"><a class="lnlinks" href="#hl-0-155">155</a>
</span><span class="lnt" id="hl-0-156"><a class="lnlinks" href="#hl-0-156">156</a>
</span><span class="lnt" id="hl-0-157"><a class="lnlinks" href="#hl-0-157">157</a>
</span><span class="lnt" id="hl-0-158"><a class="lnlinks" href="#hl-0-158">158</a>
</span><span class="lnt" id="hl-0-159"><a class="lnlinks" href="#hl-0-159">159</a>
</span><span class="lnt" id="hl-0-160"><a class="lnlinks" href="#hl-0-160">160</a>
</span><span class="lnt" id="hl-0-161"><a class="lnlinks" href="#hl-0-161">161</a>
</span><span class="lnt" id="hl-0-162"><a class="lnlinks" href="#hl-0-162">162</a>
</span><span class="lnt" id="hl-0-163"><a class="lnlinks" href="#hl-0-163">163</a>
</span><span class="lnt" id="hl-0-164"><a class="lnlinks" href="#hl-0-164">164</a>
</span><span class="lnt" id="hl-0-165"><a class="lnlinks" href="#hl-0-165">165</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;WT59F064.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;lcd.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;keyboard_io.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">cactus</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="mh">0xffff</span><span class="p">,</span><span class="mh">0xffff</span><span class="p">},</span><span class="n">djmp</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">score</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">gameover</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">char</span> <span class="nf">trans</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="sc">&#39;0&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="sc">&#39;A&#39;</span><span class="o">+</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">ISR_forward</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">TIM0_CNT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">TIM0_OFIF</span> <span class="o">|=</span> <span class="n">BIT4</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span><span class="p">(</span><span class="n">gameover</span><span class="o">==</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span><span class="p">(</span><span class="n">TIM0_MAT0A</span><span class="o">&gt;</span><span class="mi">100</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="n">TIM0_MAT0A</span><span class="o">-=</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nf">WriteIns</span><span class="p">(</span><span class="mh">0x0100</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span><span class="p">(</span><span class="n">cactus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="n">cactus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="mh">0xffff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">cactus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">&lt;=</span><span class="mh">0x0f00</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="n">cactus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-=</span><span class="mh">0x0100</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span><span class="p">(</span><span class="n">cactus</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="n">cactus</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mh">0xffff</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">cactus</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">&lt;=</span><span class="mh">0x0f00</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="n">cactus</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-=</span><span class="mh">0x0100</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span><span class="p">(</span><span class="n">djmp</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="nf">WriteIns</span><span class="p">(</span><span class="mh">0x8300</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="nf">WriteData</span><span class="p">(</span><span class="sc">&#39;D&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="o">--</span><span class="n">djmp</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nf">WriteIns</span><span class="p">(</span><span class="mh">0xc300</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">		<span class="nf">WriteData</span><span class="p">(</span><span class="sc">&#39;D&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span><span class="p">(</span><span class="n">cactus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">&lt;</span><span class="mh">0x0f00</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="nf">WriteIns</span><span class="p">(</span><span class="mh">0xc000</span><span class="o">+</span><span class="n">cactus</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">		<span class="nf">WriteData</span><span class="p">(</span><span class="sc">&#39;C&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span><span class="p">(</span><span class="n">cactus</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">&lt;</span><span class="mh">0x0f00</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="nf">WriteIns</span><span class="p">(</span><span class="mh">0xc000</span><span class="o">+</span><span class="n">cactus</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">		<span class="nf">WriteData</span><span class="p">(</span><span class="sc">&#39;C&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nf">WriteIns</span><span class="p">(</span><span class="mh">0x8c00</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="nf">WriteData</span><span class="p">(</span><span class="nf">trans</span><span class="p">(((</span><span class="n">score</span><span class="o">&amp;</span><span class="mh">0xf000</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">12</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">	<span class="nf">WriteData</span><span class="p">(</span><span class="nf">trans</span><span class="p">(((</span><span class="n">score</span><span class="o">&amp;</span><span class="mh">0x0f00</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">8</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">	<span class="nf">WriteData</span><span class="p">(</span><span class="nf">trans</span><span class="p">(((</span><span class="n">score</span><span class="o">&amp;</span><span class="mh">0x00f0</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">4</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">	<span class="nf">WriteData</span><span class="p">(</span><span class="nf">trans</span><span class="p">((</span><span class="n">score</span><span class="o">&amp;</span><span class="mh">0x000f</span><span class="p">)));</span>
</span></span><span class="line"><span class="cl">	<span class="o">++</span><span class="n">score</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">Timer0_Initial</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">TIM0_CTL</span> <span class="o">|=</span> <span class="n">BITF</span><span class="p">;</span>  <span class="c1">// Timer Enable
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">TIM0_CNT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//incremented every (pscl + 1) of trigger source
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">TIM0_PSCL</span> <span class="o">=</span> <span class="mi">23999</span><span class="p">;</span> <span class="c1">//°£ÀW­È
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">TIM0_MAT0A</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span> <span class="c1">//Match mat0a register for output match mode
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">TIM0_IE</span> <span class="o">|=</span> <span class="n">BIT4</span><span class="p">;</span> <span class="c1">// Interrupt enable for mat0a
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">IE0_0</span> <span class="o">|=</span> <span class="n">BIT3</span><span class="p">;</span>  <span class="c1">// 1: Enable Timer 0 interrupt
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">TIM0_CTL</span> <span class="o">|=</span> <span class="n">BIT0</span><span class="p">;</span> <span class="c1">// Timer Start
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">Timer1_Initial</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">TIM1_CTL</span> <span class="o">|=</span> <span class="n">BITF</span><span class="p">;</span> <span class="c1">// Timer Enable
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">TIM1_CNT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//incremented every (pscl + 1) of trigger source
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">TIM1_PSCL</span> <span class="o">=</span> <span class="mi">23999</span><span class="p">;</span> <span class="c1">//°£ÀW­È
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">TIM1_CTL</span> <span class="o">|=</span> <span class="n">BIT0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">IntInitial</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nf">initIntr</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="nf">GIE_ENABLE</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">PWM_Initial</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">GPIO_ACT_PD</span> <span class="o">=</span> <span class="mh">0xFFFB</span><span class="p">;</span><span class="c1">//GPIO port D.2 enables the PWM function.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">PWM4_PWM7_BASE_CLK</span> <span class="o">=</span> <span class="mh">0x3</span><span class="p">;</span> 	<span class="c1">// MUC Clock = 24MHz  =&gt; 2MHz
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">PWM4_PWM7_ENABLE</span> <span class="o">=</span> <span class="mh">0x40</span><span class="p">;</span> 	<span class="c1">//PWM6 enable
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">quiet_PWM6</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">PWM6_CLOCK</span><span class="o">=</span><span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">PWM6_PERIOD</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">PWM6_DUTY</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">System_Control_00</span> <span class="o">=</span> <span class="p">(</span> <span class="n">System_Control_00</span> <span class="o">|</span> <span class="mh">0x000E</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// High speed external Xtal clk selection(011:24MHz); 1: HSE oscillator on
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="n">System_Control_04</span> <span class="o">=</span> <span class="p">(</span> <span class="n">System_Control_04</span> <span class="o">|</span> <span class="mh">0x0001</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// 1: Select HSE as system clock source
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">InitialLCD</span><span class="p">();</span>			<span class="c1">// LCD initial
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">IntInitial</span><span class="p">();</span> 			<span class="c1">// MCU interrupt initial
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nf">PWM_Initial</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Timer0_Initial</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="nf">Timer1_Initial</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nf">quiet_PWM6</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="nf">KeyScan</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span><span class="p">(</span><span class="nf">GetKeyScanV</span><span class="p">()</span><span class="o">==</span><span class="mh">0xE7</span> <span class="o">&amp;&amp;</span> <span class="n">djmp</span><span class="o">&lt;=</span><span class="mi">0</span> <span class="p">){</span>
</span></span><span class="line"><span class="cl">			<span class="n">djmp</span><span class="o">=</span><span class="mi">3</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="n">PWM6_CLOCK</span><span class="o">=</span><span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="n">PWM6_PERIOD</span><span class="o">=</span><span class="mi">346</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="n">PWM6_DUTY</span><span class="o">=</span><span class="mi">173</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="nf">delay1</span><span class="p">(</span><span class="mi">65534</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">			<span class="nf">quiet_PWM6</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nf">GetKeyScanV</span><span class="p">()</span><span class="o">==</span><span class="mh">0xEB</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">			<span class="n">gameover</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">				<span class="k">if</span><span class="p">(</span><span class="nf">GetKeyScanV</span><span class="p">()</span><span class="o">==</span> <span class="mh">0xED</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">					<span class="n">gameover</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">					<span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">				<span class="p">}</span>
</span></span><span class="line"><span class="cl">				<span class="nf">KeyScan</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">		<span class="k">if</span><span class="p">(</span><span class="n">djmp</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span><span class="p">(</span><span class="n">cactus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="mh">0x0300</span> <span class="o">||</span> <span class="n">cactus</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="mh">0x0300</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">				<span class="nf">WriteIns</span><span class="p">(</span><span class="mh">0x8300</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">				<span class="nf">WriteString</span><span class="p">(</span><span class="s">&#34;game over&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">				<span class="n">gameover</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">				<span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){;}</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span><span class="p">(</span><span class="n">cactus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">&gt;</span><span class="mh">0x1000</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span><span class="p">((</span><span class="n">TIM1_CNT</span><span class="o">%</span><span class="mi">51</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">				<span class="n">cactus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="mh">0x0f00</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span><span class="p">(</span><span class="n">cactus</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">&gt;</span><span class="mh">0x1000</span> <span class="o">&amp;&amp;</span> <span class="n">cactus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="mh">0x0f00</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">			<span class="k">if</span><span class="p">((</span><span class="n">TIM1_CNT</span><span class="o">%</span><span class="mi">51</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">17</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">				<span class="n">cactus</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mh">0x0f00</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">			<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span><span class="p">(</span><span class="n">TIM1_CNT</span><span class="o">&gt;</span><span class="mh">0xefff</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">			<span class="n">TIM1_CNT</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>

<h3 id="使用零件">使用零件
<a class="header-anchor" href="#%e4%bd%bf%e7%94%a8%e9%9b%b6%e4%bb%b6"></a>
</h3><p>LCD,中斷</p>
  
  <a id="more"></a>
  <h3 id="應用技術">應用技術
<a class="header-anchor" href="#%e6%87%89%e7%94%a8%e6%8a%80%e8%a1%93"></a>
</h3><ul>
<li>很不良的超長中斷</li>
<li>在中斷時調中斷計數器，所以會變快</li>
<li>用另外的時鐘當亂數</li>
</ul>
<h2 id="uart版">Uart版
<a class="header-anchor" href="#uart%e7%89%88"></a>
</h2><h3 id="我幻想他應該長這樣">我幻想他應該長這樣
<a class="header-anchor" href="#%e6%88%91%e5%b9%bb%e6%83%b3%e4%bb%96%e6%87%89%e8%a9%b2%e9%95%b7%e9%80%99%e6%a8%a3"></a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-1-1"><a class="lnlinks" href="#hl-1-1">  1</a>
</span><span class="lnt" id="hl-1-2"><a class="lnlinks" href="#hl-1-2">  2</a>
</span><span class="lnt" id="hl-1-3"><a class="lnlinks" href="#hl-1-3">  3</a>
</span><span class="lnt" id="hl-1-4"><a class="lnlinks" href="#hl-1-4">  4</a>
</span><span class="lnt" id="hl-1-5"><a class="lnlinks" href="#hl-1-5">  5</a>
</span><span class="lnt" id="hl-1-6"><a class="lnlinks" href="#hl-1-6">  6</a>
</span><span class="lnt" id="hl-1-7"><a class="lnlinks" href="#hl-1-7">  7</a>
</span><span class="lnt" id="hl-1-8"><a class="lnlinks" href="#hl-1-8">  8</a>
</span><span class="lnt" id="hl-1-9"><a class="lnlinks" href="#hl-1-9">  9</a>
</span><span class="lnt" id="hl-1-10"><a class="lnlinks" href="#hl-1-10"> 10</a>
</span><span class="lnt" id="hl-1-11"><a class="lnlinks" href="#hl-1-11"> 11</a>
</span><span class="lnt" id="hl-1-12"><a class="lnlinks" href="#hl-1-12"> 12</a>
</span><span class="lnt" id="hl-1-13"><a class="lnlinks" href="#hl-1-13"> 13</a>
</span><span class="lnt" id="hl-1-14"><a class="lnlinks" href="#hl-1-14"> 14</a>
</span><span class="lnt" id="hl-1-15"><a class="lnlinks" href="#hl-1-15"> 15</a>
</span><span class="lnt" id="hl-1-16"><a class="lnlinks" href="#hl-1-16"> 16</a>
</span><span class="lnt" id="hl-1-17"><a class="lnlinks" href="#hl-1-17"> 17</a>
</span><span class="lnt" id="hl-1-18"><a class="lnlinks" href="#hl-1-18"> 18</a>
</span><span class="lnt" id="hl-1-19"><a class="lnlinks" href="#hl-1-19"> 19</a>
</span><span class="lnt" id="hl-1-20"><a class="lnlinks" href="#hl-1-20"> 20</a>
</span><span class="lnt" id="hl-1-21"><a class="lnlinks" href="#hl-1-21"> 21</a>
</span><span class="lnt" id="hl-1-22"><a class="lnlinks" href="#hl-1-22"> 22</a>
</span><span class="lnt" id="hl-1-23"><a class="lnlinks" href="#hl-1-23"> 23</a>
</span><span class="lnt" id="hl-1-24"><a class="lnlinks" href="#hl-1-24"> 24</a>
</span><span class="lnt" id="hl-1-25"><a class="lnlinks" href="#hl-1-25"> 25</a>
</span><span class="lnt" id="hl-1-26"><a class="lnlinks" href="#hl-1-26"> 26</a>
</span><span class="lnt" id="hl-1-27"><a class="lnlinks" href="#hl-1-27"> 27</a>
</span><span class="lnt" id="hl-1-28"><a class="lnlinks" href="#hl-1-28"> 28</a>
</span><span class="lnt" id="hl-1-29"><a class="lnlinks" href="#hl-1-29"> 29</a>
</span><span class="lnt" id="hl-1-30"><a class="lnlinks" href="#hl-1-30"> 30</a>
</span><span class="lnt" id="hl-1-31"><a class="lnlinks" href="#hl-1-31"> 31</a>
</span><span class="lnt" id="hl-1-32"><a class="lnlinks" href="#hl-1-32"> 32</a>
</span><span class="lnt" id="hl-1-33"><a class="lnlinks" href="#hl-1-33"> 33</a>
</span><span class="lnt" id="hl-1-34"><a class="lnlinks" href="#hl-1-34"> 34</a>
</span><span class="lnt" id="hl-1-35"><a class="lnlinks" href="#hl-1-35"> 35</a>
</span><span class="lnt" id="hl-1-36"><a class="lnlinks" href="#hl-1-36"> 36</a>
</span><span class="lnt" id="hl-1-37"><a class="lnlinks" href="#hl-1-37"> 37</a>
</span><span class="lnt" id="hl-1-38"><a class="lnlinks" href="#hl-1-38"> 38</a>
</span><span class="lnt" id="hl-1-39"><a class="lnlinks" href="#hl-1-39"> 39</a>
</span><span class="lnt" id="hl-1-40"><a class="lnlinks" href="#hl-1-40"> 40</a>
</span><span class="lnt" id="hl-1-41"><a class="lnlinks" href="#hl-1-41"> 41</a>
</span><span class="lnt" id="hl-1-42"><a class="lnlinks" href="#hl-1-42"> 42</a>
</span><span class="lnt" id="hl-1-43"><a class="lnlinks" href="#hl-1-43"> 43</a>
</span><span class="lnt" id="hl-1-44"><a class="lnlinks" href="#hl-1-44"> 44</a>
</span><span class="lnt" id="hl-1-45"><a class="lnlinks" href="#hl-1-45"> 45</a>
</span><span class="lnt" id="hl-1-46"><a class="lnlinks" href="#hl-1-46"> 46</a>
</span><span class="lnt" id="hl-1-47"><a class="lnlinks" href="#hl-1-47"> 47</a>
</span><span class="lnt" id="hl-1-48"><a class="lnlinks" href="#hl-1-48"> 48</a>
</span><span class="lnt" id="hl-1-49"><a class="lnlinks" href="#hl-1-49"> 49</a>
</span><span class="lnt" id="hl-1-50"><a class="lnlinks" href="#hl-1-50"> 50</a>
</span><span class="lnt" id="hl-1-51"><a class="lnlinks" href="#hl-1-51"> 51</a>
</span><span class="lnt" id="hl-1-52"><a class="lnlinks" href="#hl-1-52"> 52</a>
</span><span class="lnt" id="hl-1-53"><a class="lnlinks" href="#hl-1-53"> 53</a>
</span><span class="lnt" id="hl-1-54"><a class="lnlinks" href="#hl-1-54"> 54</a>
</span><span class="lnt" id="hl-1-55"><a class="lnlinks" href="#hl-1-55"> 55</a>
</span><span class="lnt" id="hl-1-56"><a class="lnlinks" href="#hl-1-56"> 56</a>
</span><span class="lnt" id="hl-1-57"><a class="lnlinks" href="#hl-1-57"> 57</a>
</span><span class="lnt" id="hl-1-58"><a class="lnlinks" href="#hl-1-58"> 58</a>
</span><span class="lnt" id="hl-1-59"><a class="lnlinks" href="#hl-1-59"> 59</a>
</span><span class="lnt" id="hl-1-60"><a class="lnlinks" href="#hl-1-60"> 60</a>
</span><span class="lnt" id="hl-1-61"><a class="lnlinks" href="#hl-1-61"> 61</a>
</span><span class="lnt" id="hl-1-62"><a class="lnlinks" href="#hl-1-62"> 62</a>
</span><span class="lnt" id="hl-1-63"><a class="lnlinks" href="#hl-1-63"> 63</a>
</span><span class="lnt" id="hl-1-64"><a class="lnlinks" href="#hl-1-64"> 64</a>
</span><span class="lnt" id="hl-1-65"><a class="lnlinks" href="#hl-1-65"> 65</a>
</span><span class="lnt" id="hl-1-66"><a class="lnlinks" href="#hl-1-66"> 66</a>
</span><span class="lnt" id="hl-1-67"><a class="lnlinks" href="#hl-1-67"> 67</a>
</span><span class="lnt" id="hl-1-68"><a class="lnlinks" href="#hl-1-68"> 68</a>
</span><span class="lnt" id="hl-1-69"><a class="lnlinks" href="#hl-1-69"> 69</a>
</span><span class="lnt" id="hl-1-70"><a class="lnlinks" href="#hl-1-70"> 70</a>
</span><span class="lnt" id="hl-1-71"><a class="lnlinks" href="#hl-1-71"> 71</a>
</span><span class="lnt" id="hl-1-72"><a class="lnlinks" href="#hl-1-72"> 72</a>
</span><span class="lnt" id="hl-1-73"><a class="lnlinks" href="#hl-1-73"> 73</a>
</span><span class="lnt" id="hl-1-74"><a class="lnlinks" href="#hl-1-74"> 74</a>
</span><span class="lnt" id="hl-1-75"><a class="lnlinks" href="#hl-1-75"> 75</a>
</span><span class="lnt" id="hl-1-76"><a class="lnlinks" href="#hl-1-76"> 76</a>
</span><span class="lnt" id="hl-1-77"><a class="lnlinks" href="#hl-1-77"> 77</a>
</span><span class="lnt" id="hl-1-78"><a class="lnlinks" href="#hl-1-78"> 78</a>
</span><span class="lnt" id="hl-1-79"><a class="lnlinks" href="#hl-1-79"> 79</a>
</span><span class="lnt" id="hl-1-80"><a class="lnlinks" href="#hl-1-80"> 80</a>
</span><span class="lnt" id="hl-1-81"><a class="lnlinks" href="#hl-1-81"> 81</a>
</span><span class="lnt" id="hl-1-82"><a class="lnlinks" href="#hl-1-82"> 82</a>
</span><span class="lnt" id="hl-1-83"><a class="lnlinks" href="#hl-1-83"> 83</a>
</span><span class="lnt" id="hl-1-84"><a class="lnlinks" href="#hl-1-84"> 84</a>
</span><span class="lnt" id="hl-1-85"><a class="lnlinks" href="#hl-1-85"> 85</a>
</span><span class="lnt" id="hl-1-86"><a class="lnlinks" href="#hl-1-86"> 86</a>
</span><span class="lnt" id="hl-1-87"><a class="lnlinks" href="#hl-1-87"> 87</a>
</span><span class="lnt" id="hl-1-88"><a class="lnlinks" href="#hl-1-88"> 88</a>
</span><span class="lnt" id="hl-1-89"><a class="lnlinks" href="#hl-1-89"> 89</a>
</span><span class="lnt" id="hl-1-90"><a class="lnlinks" href="#hl-1-90"> 90</a>
</span><span class="lnt" id="hl-1-91"><a class="lnlinks" href="#hl-1-91"> 91</a>
</span><span class="lnt" id="hl-1-92"><a class="lnlinks" href="#hl-1-92"> 92</a>
</span><span class="lnt" id="hl-1-93"><a class="lnlinks" href="#hl-1-93"> 93</a>
</span><span class="lnt" id="hl-1-94"><a class="lnlinks" href="#hl-1-94"> 94</a>
</span><span class="lnt" id="hl-1-95"><a class="lnlinks" href="#hl-1-95"> 95</a>
</span><span class="lnt" id="hl-1-96"><a class="lnlinks" href="#hl-1-96"> 96</a>
</span><span class="lnt" id="hl-1-97"><a class="lnlinks" href="#hl-1-97"> 97</a>
</span><span class="lnt" id="hl-1-98"><a class="lnlinks" href="#hl-1-98"> 98</a>
</span><span class="lnt" id="hl-1-99"><a class="lnlinks" href="#hl-1-99"> 99</a>
</span><span class="lnt" id="hl-1-100"><a class="lnlinks" href="#hl-1-100">100</a>
</span><span class="lnt" id="hl-1-101"><a class="lnlinks" href="#hl-1-101">101</a>
</span><span class="lnt" id="hl-1-102"><a class="lnlinks" href="#hl-1-102">102</a>
</span><span class="lnt" id="hl-1-103"><a class="lnlinks" href="#hl-1-103">103</a>
</span><span class="lnt" id="hl-1-104"><a class="lnlinks" href="#hl-1-104">104</a>
</span><span class="lnt" id="hl-1-105"><a class="lnlinks" href="#hl-1-105">105</a>
</span><span class="lnt" id="hl-1-106"><a class="lnlinks" href="#hl-1-106">106</a>
</span><span class="lnt" id="hl-1-107"><a class="lnlinks" href="#hl-1-107">107</a>
</span><span class="lnt" id="hl-1-108"><a class="lnlinks" href="#hl-1-108">108</a>
</span><span class="lnt" id="hl-1-109"><a class="lnlinks" href="#hl-1-109">109</a>
</span><span class="lnt" id="hl-1-110"><a class="lnlinks" href="#hl-1-110">110</a>
</span><span class="lnt" id="hl-1-111"><a class="lnlinks" href="#hl-1-111">111</a>
</span><span class="lnt" id="hl-1-112"><a class="lnlinks" href="#hl-1-112">112</a>
</span><span class="lnt" id="hl-1-113"><a class="lnlinks" href="#hl-1-113">113</a>
</span><span class="lnt" id="hl-1-114"><a class="lnlinks" href="#hl-1-114">114</a>
</span><span class="lnt" id="hl-1-115"><a class="lnlinks" href="#hl-1-115">115</a>
</span><span class="lnt" id="hl-1-116"><a class="lnlinks" href="#hl-1-116">116</a>
</span><span class="lnt" id="hl-1-117"><a class="lnlinks" href="#hl-1-117">117</a>
</span><span class="lnt" id="hl-1-118"><a class="lnlinks" href="#hl-1-118">118</a>
</span><span class="lnt" id="hl-1-119"><a class="lnlinks" href="#hl-1-119">119</a>
</span><span class="lnt" id="hl-1-120"><a class="lnlinks" href="#hl-1-120">120</a>
</span><span class="lnt" id="hl-1-121"><a class="lnlinks" href="#hl-1-121">121</a>
</span><span class="lnt" id="hl-1-122"><a class="lnlinks" href="#hl-1-122">122</a>
</span><span class="lnt" id="hl-1-123"><a class="lnlinks" href="#hl-1-123">123</a>
</span><span class="lnt" id="hl-1-124"><a class="lnlinks" href="#hl-1-124">124</a>
</span><span class="lnt" id="hl-1-125"><a class="lnlinks" href="#hl-1-125">125</a>
</span><span class="lnt" id="hl-1-126"><a class="lnlinks" href="#hl-1-126">126</a>
</span><span class="lnt" id="hl-1-127"><a class="lnlinks" href="#hl-1-127">127</a>
</span><span class="lnt" id="hl-1-128"><a class="lnlinks" href="#hl-1-128">128</a>
</span><span class="lnt" id="hl-1-129"><a class="lnlinks" href="#hl-1-129">129</a>
</span><span class="lnt" id="hl-1-130"><a class="lnlinks" href="#hl-1-130">130</a>
</span><span class="lnt" id="hl-1-131"><a class="lnlinks" href="#hl-1-131">131</a>
</span><span class="lnt" id="hl-1-132"><a class="lnlinks" href="#hl-1-132">132</a>
</span><span class="lnt" id="hl-1-133"><a class="lnlinks" href="#hl-1-133">133</a>
</span><span class="lnt" id="hl-1-134"><a class="lnlinks" href="#hl-1-134">134</a>
</span><span class="lnt" id="hl-1-135"><a class="lnlinks" href="#hl-1-135">135</a>
</span><span class="lnt" id="hl-1-136"><a class="lnlinks" href="#hl-1-136">136</a>
</span><span class="lnt" id="hl-1-137"><a class="lnlinks" href="#hl-1-137">137</a>
</span><span class="lnt" id="hl-1-138"><a class="lnlinks" href="#hl-1-138">138</a>
</span><span class="lnt" id="hl-1-139"><a class="lnlinks" href="#hl-1-139">139</a>
</span><span class="lnt" id="hl-1-140"><a class="lnlinks" href="#hl-1-140">140</a>
</span><span class="lnt" id="hl-1-141"><a class="lnlinks" href="#hl-1-141">141</a>
</span><span class="lnt" id="hl-1-142"><a class="lnlinks" href="#hl-1-142">142</a>
</span><span class="lnt" id="hl-1-143"><a class="lnlinks" href="#hl-1-143">143</a>
</span><span class="lnt" id="hl-1-144"><a class="lnlinks" href="#hl-1-144">144</a>
</span><span class="lnt" id="hl-1-145"><a class="lnlinks" href="#hl-1-145">145</a>
</span><span class="lnt" id="hl-1-146"><a class="lnlinks" href="#hl-1-146">146</a>
</span><span class="lnt" id="hl-1-147"><a class="lnlinks" href="#hl-1-147">147</a>
</span><span class="lnt" id="hl-1-148"><a class="lnlinks" href="#hl-1-148">148</a>
</span><span class="lnt" id="hl-1-149"><a class="lnlinks" href="#hl-1-149">149</a>
</span><span class="lnt" id="hl-1-150"><a class="lnlinks" href="#hl-1-150">150</a>
</span><span class="lnt" id="hl-1-151"><a class="lnlinks" href="#hl-1-151">151</a>
</span><span class="lnt" id="hl-1-152"><a class="lnlinks" href="#hl-1-152">152</a>
</span><span class="lnt" id="hl-1-153"><a class="lnlinks" href="#hl-1-153">153</a>
</span><span class="lnt" id="hl-1-154"><a class="lnlinks" href="#hl-1-154">154</a>
</span><span class="lnt" id="hl-1-155"><a class="lnlinks" href="#hl-1-155">155</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C" data-lang="C"><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;time.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#define hight 24
</span></span></span><span class="line"><span class="cl"><span class="cp">#define len 80
</span></span></span><span class="line"><span class="cl"><span class="cp">#define signoff 2
</span></span></span><span class="line"><span class="cl"><span class="cp">#define framesize 2048
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">char</span> <span class="n">cactus</span><span class="p">[</span><span class="mi">70</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="s">&#34;  /-</span><span class="se">\\</span><span class="s">/-</span><span class="se">\\</span><span class="s">  </span><span class="se">\&#34;</span><span class="s"> | || | </span><span class="se">\&#34;\\\\</span><span class="s">| || |// </span><span class="se">\\</span><span class="s">| || |/   | || |    | || |  &#34;</span><span class="p">};</span> <span class="c1">//10*6
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">char</span> <span class="n">role</span><span class="p">[</span><span class="mi">80</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="s">&#34; _______ |       ||  $ $  ||   @   || ( ~ ) ||       ||_______|&#34;</span><span class="p">};</span> <span class="c1">//9*7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="n">hang</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">sleep</span><span class="p">(</span><span class="kt">int</span> <span class="n">s</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">time_t</span> <span class="n">pass</span><span class="o">=</span><span class="nf">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="nf">time</span><span class="p">(</span><span class="nb">NULL</span><span class="p">)</span><span class="o">-</span><span class="n">pass</span><span class="o">&lt;</span><span class="n">s</span><span class="p">){;}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">char</span> <span class="o">*</span><span class="nf">makeframe</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">=</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="nf">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="o">*</span><span class="n">framesize</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">framesize</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="o">*</span><span class="p">(</span><span class="n">p</span><span class="o">+</span><span class="n">i</span><span class="p">)</span><span class="o">=</span><span class="sc">&#39; &#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="p">(</span><span class="n">p</span><span class="o">+</span><span class="n">framesize</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">=</span><span class="sc">&#39;\0&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">p</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">endofscreen</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span><span class="n">len</span><span class="o">+</span><span class="n">signoff</span><span class="p">)</span><span class="o">*</span><span class="n">hight</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">sat</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">f</span><span class="p">,</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">x</span><span class="p">,</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">y</span><span class="p">,</span><span class="kt">char</span> <span class="n">c</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//printf(&#34;w_po:%d&#34;,x+(len+signoff)*y);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&lt;</span><span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">y</span><span class="o">&lt;</span><span class="n">hight</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="p">(</span><span class="n">len</span><span class="o">+</span><span class="n">signoff</span><span class="p">)</span><span class="o">*</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="n">c</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;sat overrange at (%d,%d)&#34;</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">disobj</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">px</span><span class="p">,</span><span class="n">py</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="o">*</span><span class="n">o</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="n">disobj</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">typedef</span> <span class="k">struct</span> <span class="n">disobj</span> <span class="n">disobj</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">initdisobj</span><span class="p">(</span><span class="n">disobj</span> <span class="o">*</span><span class="n">o</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="n">o</span><span class="o">-&gt;</span><span class="n">px</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">o</span><span class="o">-&gt;</span><span class="n">py</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">o</span><span class="o">-&gt;</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">o</span><span class="o">-&gt;</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">o</span><span class="o">-&gt;</span><span class="n">o</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">o</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">setdisobj</span><span class="p">(</span><span class="n">disobj</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">px</span><span class="p">,</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">py</span><span class="p">,</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">x</span><span class="p">,</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">y</span><span class="p">,</span><span class="kt">char</span> <span class="o">*</span><span class="n">bm</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="n">obj</span><span class="o">-&gt;</span><span class="n">px</span><span class="o">=</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">obj</span><span class="o">-&gt;</span><span class="n">py</span><span class="o">=</span><span class="n">py</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">obj</span><span class="o">-&gt;</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">obj</span><span class="o">-&gt;</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">obj</span><span class="o">-&gt;</span><span class="n">o</span><span class="o">=</span><span class="n">bm</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">cactuswork</span><span class="p">(</span><span class="n">disobj</span> <span class="o">*</span><span class="n">o</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">hang</span><span class="o">&gt;</span><span class="mi">9</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="nf">rand</span><span class="p">()</span><span class="o">%</span><span class="mi">3</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="n">disobj</span> <span class="o">*</span><span class="n">n</span><span class="o">=</span><span class="p">(</span><span class="n">disobj</span> <span class="o">*</span><span class="p">)</span><span class="nf">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">disobj</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="nf">initdisobj</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="nf">setdisobj</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">len</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="n">hight</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="n">cactus</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="n">hang</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">o</span><span class="o">!=</span><span class="nb">NULL</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">o</span><span class="o">==</span><span class="n">cactus</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span><span class="p">(</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">px</span><span class="o">&gt;</span><span class="n">len</span><span class="o">*</span><span class="mi">2</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">o</span><span class="o">-&gt;</span><span class="n">px</span><span class="o">-=</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">o</span><span class="o">=</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">hang</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">layout</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">f</span><span class="p">,</span><span class="n">disobj</span> <span class="o">*</span><span class="n">o</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">o</span><span class="o">!=</span><span class="nb">NULL</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">+</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">py</span><span class="o">&lt;</span><span class="n">hight</span> <span class="o">&amp;&amp;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">y</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">+</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">px</span><span class="o">&lt;</span><span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">;</span><span class="o">++</span><span class="n">j</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//printf(&#34;w_bm:%c %d %d &#34;,o-&gt;o[j+(o-&gt;x)*i],j,i);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="nf">sat</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">px</span><span class="o">+</span><span class="n">j</span><span class="p">,</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">py</span><span class="o">+</span><span class="n">i</span><span class="p">,</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">o</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="p">(</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">o</span><span class="o">=</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">scanner</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">screen</span><span class="p">,</span><span class="kt">int</span> <span class="n">k</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">hight</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">len</span><span class="p">;</span><span class="o">++</span><span class="n">j</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span><span class="p">(</span><span class="n">j</span><span class="o">==</span><span class="n">k</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="nf">sat</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="sc">&#39;|&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nf">sat</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="sc">&#39; &#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">scanendline</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">f</span><span class="p">,</span><span class="kt">char</span> <span class="o">*</span><span class="n">staff</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">hight</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">signoff</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="c1">//printf(&#34;position:%d &#34;,len*(i+1)+i*signoff+j);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="o">*</span><span class="p">(</span><span class="n">f</span><span class="o">+</span><span class="n">len</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="n">i</span><span class="o">*</span><span class="n">signoff</span><span class="p">)</span><span class="o">=*</span><span class="p">(</span><span class="n">staff</span><span class="o">+</span><span class="n">j</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="o">*</span><span class="n">screen</span><span class="o">=</span><span class="nf">makeframe</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">disobj</span> <span class="o">*</span><span class="n">obj</span><span class="o">=</span><span class="p">(</span><span class="n">disobj</span> <span class="o">*</span><span class="p">)</span><span class="nf">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">disobj</span><span class="p">)),</span><span class="o">*</span><span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">initdisobj</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">setdisobj</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="n">hight</span><span class="o">-</span><span class="mi">9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="n">role</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span><span class="o">=</span><span class="n">obj</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">obj</span><span class="o">=</span><span class="p">(</span><span class="n">disobj</span> <span class="o">*</span><span class="p">)</span><span class="nf">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">disobj</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="nf">initdisobj</span><span class="p">(</span><span class="n">obj</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">setdisobj</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">len</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="n">hight</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="n">cactus</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="n">obj</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">screen</span><span class="p">[</span><span class="nf">endofscreen</span><span class="p">()]</span><span class="o">=</span><span class="sc">&#39;\0&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">scanendline</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="s">&#34; </span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">scanner</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">len</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">layout</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">s</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\n</span><span class="s">%s&#34;</span><span class="p">,</span><span class="n">screen</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">k</span><span class="o">&lt;</span><span class="mi">40</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">s</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">px</span><span class="o">-=</span><span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nf">scanner</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">len</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">layout</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">s</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\n</span><span class="s">%s&#34;</span><span class="p">,</span><span class="n">screen</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">k</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mh">0x0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>

<p>disobj是單向鏈結，串起我要顯示的所有圖(bit map)
所有 frame 掛在單層的單節點樹上，節點有序</p>
<p>每一個畫面皆是把disobj上的bit map畫上frame，我只要動disobj就可以移動圖了</p>
<p>這code實作在<del>美好</del>x64 with linux4.2上
我只要改掉printf就移植<del>完成</del></p>
<p>這幻想，看結果</p>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-2-1"><a class="lnlinks" href="#hl-2-1">  1</a>
</span><span class="lnt" id="hl-2-2"><a class="lnlinks" href="#hl-2-2">  2</a>
</span><span class="lnt" id="hl-2-3"><a class="lnlinks" href="#hl-2-3">  3</a>
</span><span class="lnt" id="hl-2-4"><a class="lnlinks" href="#hl-2-4">  4</a>
</span><span class="lnt" id="hl-2-5"><a class="lnlinks" href="#hl-2-5">  5</a>
</span><span class="lnt" id="hl-2-6"><a class="lnlinks" href="#hl-2-6">  6</a>
</span><span class="lnt" id="hl-2-7"><a class="lnlinks" href="#hl-2-7">  7</a>
</span><span class="lnt" id="hl-2-8"><a class="lnlinks" href="#hl-2-8">  8</a>
</span><span class="lnt" id="hl-2-9"><a class="lnlinks" href="#hl-2-9">  9</a>
</span><span class="lnt" id="hl-2-10"><a class="lnlinks" href="#hl-2-10"> 10</a>
</span><span class="lnt" id="hl-2-11"><a class="lnlinks" href="#hl-2-11"> 11</a>
</span><span class="lnt" id="hl-2-12"><a class="lnlinks" href="#hl-2-12"> 12</a>
</span><span class="lnt" id="hl-2-13"><a class="lnlinks" href="#hl-2-13"> 13</a>
</span><span class="lnt" id="hl-2-14"><a class="lnlinks" href="#hl-2-14"> 14</a>
</span><span class="lnt" id="hl-2-15"><a class="lnlinks" href="#hl-2-15"> 15</a>
</span><span class="lnt" id="hl-2-16"><a class="lnlinks" href="#hl-2-16"> 16</a>
</span><span class="lnt" id="hl-2-17"><a class="lnlinks" href="#hl-2-17"> 17</a>
</span><span class="lnt" id="hl-2-18"><a class="lnlinks" href="#hl-2-18"> 18</a>
</span><span class="lnt" id="hl-2-19"><a class="lnlinks" href="#hl-2-19"> 19</a>
</span><span class="lnt" id="hl-2-20"><a class="lnlinks" href="#hl-2-20"> 20</a>
</span><span class="lnt" id="hl-2-21"><a class="lnlinks" href="#hl-2-21"> 21</a>
</span><span class="lnt" id="hl-2-22"><a class="lnlinks" href="#hl-2-22"> 22</a>
</span><span class="lnt" id="hl-2-23"><a class="lnlinks" href="#hl-2-23"> 23</a>
</span><span class="lnt" id="hl-2-24"><a class="lnlinks" href="#hl-2-24"> 24</a>
</span><span class="lnt" id="hl-2-25"><a class="lnlinks" href="#hl-2-25"> 25</a>
</span><span class="lnt" id="hl-2-26"><a class="lnlinks" href="#hl-2-26"> 26</a>
</span><span class="lnt" id="hl-2-27"><a class="lnlinks" href="#hl-2-27"> 27</a>
</span><span class="lnt" id="hl-2-28"><a class="lnlinks" href="#hl-2-28"> 28</a>
</span><span class="lnt" id="hl-2-29"><a class="lnlinks" href="#hl-2-29"> 29</a>
</span><span class="lnt" id="hl-2-30"><a class="lnlinks" href="#hl-2-30"> 30</a>
</span><span class="lnt" id="hl-2-31"><a class="lnlinks" href="#hl-2-31"> 31</a>
</span><span class="lnt" id="hl-2-32"><a class="lnlinks" href="#hl-2-32"> 32</a>
</span><span class="lnt" id="hl-2-33"><a class="lnlinks" href="#hl-2-33"> 33</a>
</span><span class="lnt" id="hl-2-34"><a class="lnlinks" href="#hl-2-34"> 34</a>
</span><span class="lnt" id="hl-2-35"><a class="lnlinks" href="#hl-2-35"> 35</a>
</span><span class="lnt" id="hl-2-36"><a class="lnlinks" href="#hl-2-36"> 36</a>
</span><span class="lnt" id="hl-2-37"><a class="lnlinks" href="#hl-2-37"> 37</a>
</span><span class="lnt" id="hl-2-38"><a class="lnlinks" href="#hl-2-38"> 38</a>
</span><span class="lnt" id="hl-2-39"><a class="lnlinks" href="#hl-2-39"> 39</a>
</span><span class="lnt" id="hl-2-40"><a class="lnlinks" href="#hl-2-40"> 40</a>
</span><span class="lnt" id="hl-2-41"><a class="lnlinks" href="#hl-2-41"> 41</a>
</span><span class="lnt" id="hl-2-42"><a class="lnlinks" href="#hl-2-42"> 42</a>
</span><span class="lnt" id="hl-2-43"><a class="lnlinks" href="#hl-2-43"> 43</a>
</span><span class="lnt" id="hl-2-44"><a class="lnlinks" href="#hl-2-44"> 44</a>
</span><span class="lnt" id="hl-2-45"><a class="lnlinks" href="#hl-2-45"> 45</a>
</span><span class="lnt" id="hl-2-46"><a class="lnlinks" href="#hl-2-46"> 46</a>
</span><span class="lnt" id="hl-2-47"><a class="lnlinks" href="#hl-2-47"> 47</a>
</span><span class="lnt" id="hl-2-48"><a class="lnlinks" href="#hl-2-48"> 48</a>
</span><span class="lnt" id="hl-2-49"><a class="lnlinks" href="#hl-2-49"> 49</a>
</span><span class="lnt" id="hl-2-50"><a class="lnlinks" href="#hl-2-50"> 50</a>
</span><span class="lnt" id="hl-2-51"><a class="lnlinks" href="#hl-2-51"> 51</a>
</span><span class="lnt" id="hl-2-52"><a class="lnlinks" href="#hl-2-52"> 52</a>
</span><span class="lnt" id="hl-2-53"><a class="lnlinks" href="#hl-2-53"> 53</a>
</span><span class="lnt" id="hl-2-54"><a class="lnlinks" href="#hl-2-54"> 54</a>
</span><span class="lnt" id="hl-2-55"><a class="lnlinks" href="#hl-2-55"> 55</a>
</span><span class="lnt" id="hl-2-56"><a class="lnlinks" href="#hl-2-56"> 56</a>
</span><span class="lnt" id="hl-2-57"><a class="lnlinks" href="#hl-2-57"> 57</a>
</span><span class="lnt" id="hl-2-58"><a class="lnlinks" href="#hl-2-58"> 58</a>
</span><span class="lnt" id="hl-2-59"><a class="lnlinks" href="#hl-2-59"> 59</a>
</span><span class="lnt" id="hl-2-60"><a class="lnlinks" href="#hl-2-60"> 60</a>
</span><span class="lnt" id="hl-2-61"><a class="lnlinks" href="#hl-2-61"> 61</a>
</span><span class="lnt" id="hl-2-62"><a class="lnlinks" href="#hl-2-62"> 62</a>
</span><span class="lnt" id="hl-2-63"><a class="lnlinks" href="#hl-2-63"> 63</a>
</span><span class="lnt" id="hl-2-64"><a class="lnlinks" href="#hl-2-64"> 64</a>
</span><span class="lnt" id="hl-2-65"><a class="lnlinks" href="#hl-2-65"> 65</a>
</span><span class="lnt" id="hl-2-66"><a class="lnlinks" href="#hl-2-66"> 66</a>
</span><span class="lnt" id="hl-2-67"><a class="lnlinks" href="#hl-2-67"> 67</a>
</span><span class="lnt" id="hl-2-68"><a class="lnlinks" href="#hl-2-68"> 68</a>
</span><span class="lnt" id="hl-2-69"><a class="lnlinks" href="#hl-2-69"> 69</a>
</span><span class="lnt" id="hl-2-70"><a class="lnlinks" href="#hl-2-70"> 70</a>
</span><span class="lnt" id="hl-2-71"><a class="lnlinks" href="#hl-2-71"> 71</a>
</span><span class="lnt" id="hl-2-72"><a class="lnlinks" href="#hl-2-72"> 72</a>
</span><span class="lnt" id="hl-2-73"><a class="lnlinks" href="#hl-2-73"> 73</a>
</span><span class="lnt" id="hl-2-74"><a class="lnlinks" href="#hl-2-74"> 74</a>
</span><span class="lnt" id="hl-2-75"><a class="lnlinks" href="#hl-2-75"> 75</a>
</span><span class="lnt" id="hl-2-76"><a class="lnlinks" href="#hl-2-76"> 76</a>
</span><span class="lnt" id="hl-2-77"><a class="lnlinks" href="#hl-2-77"> 77</a>
</span><span class="lnt" id="hl-2-78"><a class="lnlinks" href="#hl-2-78"> 78</a>
</span><span class="lnt" id="hl-2-79"><a class="lnlinks" href="#hl-2-79"> 79</a>
</span><span class="lnt" id="hl-2-80"><a class="lnlinks" href="#hl-2-80"> 80</a>
</span><span class="lnt" id="hl-2-81"><a class="lnlinks" href="#hl-2-81"> 81</a>
</span><span class="lnt" id="hl-2-82"><a class="lnlinks" href="#hl-2-82"> 82</a>
</span><span class="lnt" id="hl-2-83"><a class="lnlinks" href="#hl-2-83"> 83</a>
</span><span class="lnt" id="hl-2-84"><a class="lnlinks" href="#hl-2-84"> 84</a>
</span><span class="lnt" id="hl-2-85"><a class="lnlinks" href="#hl-2-85"> 85</a>
</span><span class="lnt" id="hl-2-86"><a class="lnlinks" href="#hl-2-86"> 86</a>
</span><span class="lnt" id="hl-2-87"><a class="lnlinks" href="#hl-2-87"> 87</a>
</span><span class="lnt" id="hl-2-88"><a class="lnlinks" href="#hl-2-88"> 88</a>
</span><span class="lnt" id="hl-2-89"><a class="lnlinks" href="#hl-2-89"> 89</a>
</span><span class="lnt" id="hl-2-90"><a class="lnlinks" href="#hl-2-90"> 90</a>
</span><span class="lnt" id="hl-2-91"><a class="lnlinks" href="#hl-2-91"> 91</a>
</span><span class="lnt" id="hl-2-92"><a class="lnlinks" href="#hl-2-92"> 92</a>
</span><span class="lnt" id="hl-2-93"><a class="lnlinks" href="#hl-2-93"> 93</a>
</span><span class="lnt" id="hl-2-94"><a class="lnlinks" href="#hl-2-94"> 94</a>
</span><span class="lnt" id="hl-2-95"><a class="lnlinks" href="#hl-2-95"> 95</a>
</span><span class="lnt" id="hl-2-96"><a class="lnlinks" href="#hl-2-96"> 96</a>
</span><span class="lnt" id="hl-2-97"><a class="lnlinks" href="#hl-2-97"> 97</a>
</span><span class="lnt" id="hl-2-98"><a class="lnlinks" href="#hl-2-98"> 98</a>
</span><span class="lnt" id="hl-2-99"><a class="lnlinks" href="#hl-2-99"> 99</a>
</span><span class="lnt" id="hl-2-100"><a class="lnlinks" href="#hl-2-100">100</a>
</span><span class="lnt" id="hl-2-101"><a class="lnlinks" href="#hl-2-101">101</a>
</span><span class="lnt" id="hl-2-102"><a class="lnlinks" href="#hl-2-102">102</a>
</span><span class="lnt" id="hl-2-103"><a class="lnlinks" href="#hl-2-103">103</a>
</span><span class="lnt" id="hl-2-104"><a class="lnlinks" href="#hl-2-104">104</a>
</span><span class="lnt" id="hl-2-105"><a class="lnlinks" href="#hl-2-105">105</a>
</span><span class="lnt" id="hl-2-106"><a class="lnlinks" href="#hl-2-106">106</a>
</span><span class="lnt" id="hl-2-107"><a class="lnlinks" href="#hl-2-107">107</a>
</span><span class="lnt" id="hl-2-108"><a class="lnlinks" href="#hl-2-108">108</a>
</span><span class="lnt" id="hl-2-109"><a class="lnlinks" href="#hl-2-109">109</a>
</span><span class="lnt" id="hl-2-110"><a class="lnlinks" href="#hl-2-110">110</a>
</span><span class="lnt" id="hl-2-111"><a class="lnlinks" href="#hl-2-111">111</a>
</span><span class="lnt" id="hl-2-112"><a class="lnlinks" href="#hl-2-112">112</a>
</span><span class="lnt" id="hl-2-113"><a class="lnlinks" href="#hl-2-113">113</a>
</span><span class="lnt" id="hl-2-114"><a class="lnlinks" href="#hl-2-114">114</a>
</span><span class="lnt" id="hl-2-115"><a class="lnlinks" href="#hl-2-115">115</a>
</span><span class="lnt" id="hl-2-116"><a class="lnlinks" href="#hl-2-116">116</a>
</span><span class="lnt" id="hl-2-117"><a class="lnlinks" href="#hl-2-117">117</a>
</span><span class="lnt" id="hl-2-118"><a class="lnlinks" href="#hl-2-118">118</a>
</span><span class="lnt" id="hl-2-119"><a class="lnlinks" href="#hl-2-119">119</a>
</span><span class="lnt" id="hl-2-120"><a class="lnlinks" href="#hl-2-120">120</a>
</span><span class="lnt" id="hl-2-121"><a class="lnlinks" href="#hl-2-121">121</a>
</span><span class="lnt" id="hl-2-122"><a class="lnlinks" href="#hl-2-122">122</a>
</span><span class="lnt" id="hl-2-123"><a class="lnlinks" href="#hl-2-123">123</a>
</span><span class="lnt" id="hl-2-124"><a class="lnlinks" href="#hl-2-124">124</a>
</span><span class="lnt" id="hl-2-125"><a class="lnlinks" href="#hl-2-125">125</a>
</span><span class="lnt" id="hl-2-126"><a class="lnlinks" href="#hl-2-126">126</a>
</span><span class="lnt" id="hl-2-127"><a class="lnlinks" href="#hl-2-127">127</a>
</span><span class="lnt" id="hl-2-128"><a class="lnlinks" href="#hl-2-128">128</a>
</span><span class="lnt" id="hl-2-129"><a class="lnlinks" href="#hl-2-129">129</a>
</span><span class="lnt" id="hl-2-130"><a class="lnlinks" href="#hl-2-130">130</a>
</span><span class="lnt" id="hl-2-131"><a class="lnlinks" href="#hl-2-131">131</a>
</span><span class="lnt" id="hl-2-132"><a class="lnlinks" href="#hl-2-132">132</a>
</span><span class="lnt" id="hl-2-133"><a class="lnlinks" href="#hl-2-133">133</a>
</span><span class="lnt" id="hl-2-134"><a class="lnlinks" href="#hl-2-134">134</a>
</span><span class="lnt" id="hl-2-135"><a class="lnlinks" href="#hl-2-135">135</a>
</span><span class="lnt" id="hl-2-136"><a class="lnlinks" href="#hl-2-136">136</a>
</span><span class="lnt" id="hl-2-137"><a class="lnlinks" href="#hl-2-137">137</a>
</span><span class="lnt" id="hl-2-138"><a class="lnlinks" href="#hl-2-138">138</a>
</span><span class="lnt" id="hl-2-139"><a class="lnlinks" href="#hl-2-139">139</a>
</span><span class="lnt" id="hl-2-140"><a class="lnlinks" href="#hl-2-140">140</a>
</span><span class="lnt" id="hl-2-141"><a class="lnlinks" href="#hl-2-141">141</a>
</span><span class="lnt" id="hl-2-142"><a class="lnlinks" href="#hl-2-142">142</a>
</span><span class="lnt" id="hl-2-143"><a class="lnlinks" href="#hl-2-143">143</a>
</span><span class="lnt" id="hl-2-144"><a class="lnlinks" href="#hl-2-144">144</a>
</span><span class="lnt" id="hl-2-145"><a class="lnlinks" href="#hl-2-145">145</a>
</span><span class="lnt" id="hl-2-146"><a class="lnlinks" href="#hl-2-146">146</a>
</span><span class="lnt" id="hl-2-147"><a class="lnlinks" href="#hl-2-147">147</a>
</span><span class="lnt" id="hl-2-148"><a class="lnlinks" href="#hl-2-148">148</a>
</span><span class="lnt" id="hl-2-149"><a class="lnlinks" href="#hl-2-149">149</a>
</span><span class="lnt" id="hl-2-150"><a class="lnlinks" href="#hl-2-150">150</a>
</span><span class="lnt" id="hl-2-151"><a class="lnlinks" href="#hl-2-151">151</a>
</span><span class="lnt" id="hl-2-152"><a class="lnlinks" href="#hl-2-152">152</a>
</span><span class="lnt" id="hl-2-153"><a class="lnlinks" href="#hl-2-153">153</a>
</span><span class="lnt" id="hl-2-154"><a class="lnlinks" href="#hl-2-154">154</a>
</span><span class="lnt" id="hl-2-155"><a class="lnlinks" href="#hl-2-155">155</a>
</span><span class="lnt" id="hl-2-156"><a class="lnlinks" href="#hl-2-156">156</a>
</span><span class="lnt" id="hl-2-157"><a class="lnlinks" href="#hl-2-157">157</a>
</span><span class="lnt" id="hl-2-158"><a class="lnlinks" href="#hl-2-158">158</a>
</span><span class="lnt" id="hl-2-159"><a class="lnlinks" href="#hl-2-159">159</a>
</span><span class="lnt" id="hl-2-160"><a class="lnlinks" href="#hl-2-160">160</a>
</span><span class="lnt" id="hl-2-161"><a class="lnlinks" href="#hl-2-161">161</a>
</span><span class="lnt" id="hl-2-162"><a class="lnlinks" href="#hl-2-162">162</a>
</span><span class="lnt" id="hl-2-163"><a class="lnlinks" href="#hl-2-163">163</a>
</span><span class="lnt" id="hl-2-164"><a class="lnlinks" href="#hl-2-164">164</a>
</span><span class="lnt" id="hl-2-165"><a class="lnlinks" href="#hl-2-165">165</a>
</span><span class="lnt" id="hl-2-166"><a class="lnlinks" href="#hl-2-166">166</a>
</span><span class="lnt" id="hl-2-167"><a class="lnlinks" href="#hl-2-167">167</a>
</span><span class="lnt" id="hl-2-168"><a class="lnlinks" href="#hl-2-168">168</a>
</span><span class="lnt" id="hl-2-169"><a class="lnlinks" href="#hl-2-169">169</a>
</span><span class="lnt" id="hl-2-170"><a class="lnlinks" href="#hl-2-170">170</a>
</span><span class="lnt" id="hl-2-171"><a class="lnlinks" href="#hl-2-171">171</a>
</span><span class="lnt" id="hl-2-172"><a class="lnlinks" href="#hl-2-172">172</a>
</span><span class="lnt" id="hl-2-173"><a class="lnlinks" href="#hl-2-173">173</a>
</span><span class="lnt" id="hl-2-174"><a class="lnlinks" href="#hl-2-174">174</a>
</span><span class="lnt" id="hl-2-175"><a class="lnlinks" href="#hl-2-175">175</a>
</span><span class="lnt" id="hl-2-176"><a class="lnlinks" href="#hl-2-176">176</a>
</span><span class="lnt" id="hl-2-177"><a class="lnlinks" href="#hl-2-177">177</a>
</span><span class="lnt" id="hl-2-178"><a class="lnlinks" href="#hl-2-178">178</a>
</span><span class="lnt" id="hl-2-179"><a class="lnlinks" href="#hl-2-179">179</a>
</span><span class="lnt" id="hl-2-180"><a class="lnlinks" href="#hl-2-180">180</a>
</span><span class="lnt" id="hl-2-181"><a class="lnlinks" href="#hl-2-181">181</a>
</span><span class="lnt" id="hl-2-182"><a class="lnlinks" href="#hl-2-182">182</a>
</span><span class="lnt" id="hl-2-183"><a class="lnlinks" href="#hl-2-183">183</a>
</span><span class="lnt" id="hl-2-184"><a class="lnlinks" href="#hl-2-184">184</a>
</span><span class="lnt" id="hl-2-185"><a class="lnlinks" href="#hl-2-185">185</a>
</span><span class="lnt" id="hl-2-186"><a class="lnlinks" href="#hl-2-186">186</a>
</span><span class="lnt" id="hl-2-187"><a class="lnlinks" href="#hl-2-187">187</a>
</span><span class="lnt" id="hl-2-188"><a class="lnlinks" href="#hl-2-188">188</a>
</span><span class="lnt" id="hl-2-189"><a class="lnlinks" href="#hl-2-189">189</a>
</span><span class="lnt" id="hl-2-190"><a class="lnlinks" href="#hl-2-190">190</a>
</span><span class="lnt" id="hl-2-191"><a class="lnlinks" href="#hl-2-191">191</a>
</span><span class="lnt" id="hl-2-192"><a class="lnlinks" href="#hl-2-192">192</a>
</span><span class="lnt" id="hl-2-193"><a class="lnlinks" href="#hl-2-193">193</a>
</span><span class="lnt" id="hl-2-194"><a class="lnlinks" href="#hl-2-194">194</a>
</span><span class="lnt" id="hl-2-195"><a class="lnlinks" href="#hl-2-195">195</a>
</span><span class="lnt" id="hl-2-196"><a class="lnlinks" href="#hl-2-196">196</a>
</span><span class="lnt" id="hl-2-197"><a class="lnlinks" href="#hl-2-197">197</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C" data-lang="C"><span class="line"><span class="cl"><span class="cp">#include</span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;keyboard_io.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;WT59F064.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;Uart.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;lcd.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#define hight 25
</span></span></span><span class="line"><span class="cl"><span class="cp">#define len 65
</span></span></span><span class="line"><span class="cl"><span class="cp">#define signoff 2
</span></span></span><span class="line"><span class="cl"><span class="cp">#define framesize 2048
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">char</span> <span class="n">cactus</span><span class="p">[</span><span class="mi">70</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="s">&#34;  /-</span><span class="se">\\</span><span class="s">/-</span><span class="se">\\</span><span class="s">  </span><span class="se">\&#34;</span><span class="s"> | || | </span><span class="se">\&#34;\\\\</span><span class="s">| || |// </span><span class="se">\\</span><span class="s">| || |/   | || |    | || |  &#34;</span><span class="p">};</span> <span class="c1">//10*6
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">char</span> <span class="n">role</span><span class="p">[</span><span class="mi">80</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="s">&#34; _______ |       ||  $ $  ||   @   || ( ~ ) ||       ||_______|&#34;</span><span class="p">};</span> <span class="c1">//9*7
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">char</span> <span class="n">hexresult</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">djmp</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">dderect</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">score</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">char</span> <span class="o">*</span><span class="nf">makeframe</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">p</span><span class="o">=</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="nf">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="o">*</span><span class="n">framesize</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">framesize</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="o">*</span><span class="p">(</span><span class="n">p</span><span class="o">+</span><span class="n">i</span><span class="p">)</span><span class="o">=</span><span class="sc">&#39;*&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">*</span><span class="p">(</span><span class="n">p</span><span class="o">+</span><span class="n">framesize</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">=</span><span class="sc">&#39;\0&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">p</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">endofscreen</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span><span class="n">len</span><span class="o">+</span><span class="n">signoff</span><span class="p">)</span><span class="o">*</span><span class="n">hight</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">sat</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">f</span><span class="p">,</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">x</span><span class="p">,</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">y</span><span class="p">,</span><span class="kt">char</span> <span class="n">c</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">x</span><span class="o">&lt;</span><span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">y</span><span class="o">&lt;</span><span class="n">hight</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="n">f</span><span class="p">[</span><span class="n">x</span><span class="o">+</span><span class="p">(</span><span class="n">len</span><span class="o">+</span><span class="n">signoff</span><span class="p">)</span><span class="o">*</span><span class="n">y</span><span class="p">]</span><span class="o">=</span><span class="n">c</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    	<span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">//printf(&#34;sat overrange at (%d,%d)&#34;,x,y);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="n">disobj</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">px</span><span class="p">,</span><span class="n">py</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="o">*</span><span class="n">o</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="n">disobj</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">typedef</span> <span class="k">struct</span> <span class="n">disobj</span> <span class="n">disobj</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">initdisobj</span><span class="p">(</span><span class="n">disobj</span> <span class="o">*</span><span class="n">o</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="n">o</span><span class="o">-&gt;</span><span class="n">px</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">o</span><span class="o">-&gt;</span><span class="n">py</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">o</span><span class="o">-&gt;</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">o</span><span class="o">-&gt;</span><span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">o</span><span class="o">-&gt;</span><span class="n">o</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">o</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">=</span><span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">setdisobj</span><span class="p">(</span><span class="n">disobj</span> <span class="o">*</span><span class="n">obj</span><span class="p">,</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">px</span><span class="p">,</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">py</span><span class="p">,</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">x</span><span class="p">,</span><span class="kt">unsigned</span> <span class="kt">short</span> <span class="n">y</span><span class="p">,</span><span class="kt">char</span> <span class="o">*</span><span class="n">bm</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    <span class="n">obj</span><span class="o">-&gt;</span><span class="n">px</span><span class="o">=</span><span class="n">px</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">obj</span><span class="o">-&gt;</span><span class="n">py</span><span class="o">=</span><span class="n">py</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">obj</span><span class="o">-&gt;</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">obj</span><span class="o">-&gt;</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">obj</span><span class="o">-&gt;</span><span class="n">o</span><span class="o">=</span><span class="n">bm</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">layout</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">f</span><span class="p">,</span><span class="n">disobj</span> <span class="o">*</span><span class="n">o</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">o</span><span class="o">!=</span><span class="nb">NULL</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">+</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">py</span><span class="o">&lt;</span><span class="n">hight</span> <span class="o">&amp;&amp;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">y</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">+</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">px</span><span class="o">&lt;</span><span class="n">len</span> <span class="o">&amp;&amp;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">;</span><span class="o">++</span><span class="n">j</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="nf">sat</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">px</span><span class="o">+</span><span class="n">j</span><span class="p">,</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">py</span><span class="o">+</span><span class="n">i</span><span class="p">,</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">o</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="p">(</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">o</span><span class="o">=</span><span class="n">o</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">scanner</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">screen</span><span class="p">,</span><span class="kt">int</span> <span class="n">k</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">hight</span><span class="p">;</span><span class="o">++</span><span class="n">i</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">len</span><span class="p">;</span><span class="o">++</span><span class="n">j</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span><span class="p">(</span><span class="n">j</span><span class="o">==</span><span class="n">k</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">                <span class="nf">sat</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="sc">&#39;|&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nf">sat</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">i</span><span class="p">,</span><span class="sc">&#39;*&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">showframe</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">f</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">hight</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">len</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        	<span class="nf">DRV_PutChar</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="p">(</span><span class="n">len</span><span class="o">+</span><span class="n">signoff</span><span class="p">)</span><span class="o">*</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nf">DRV_PutChar</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">DRV_PutChar</span><span class="p">(</span><span class="sc">&#39;\r&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">delay1</span><span class="p">(</span><span class="mh">0xffff</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">64</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    	<span class="nf">delay1</span><span class="p">(</span><span class="mh">0xffff</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="kt">char</span> <span class="nf">hexshow</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="sc">&#39;0&#39;</span><span class="o">+</span><span class="n">i</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="sc">&#39;A&#39;</span><span class="o">+</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">dectohex</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="n">hexresult</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">=</span><span class="nf">hexshow</span><span class="p">((</span><span class="n">i</span><span class="o">&amp;</span><span class="mh">0xf000</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">12</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">hexresult</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="nf">hexshow</span><span class="p">((</span><span class="n">i</span><span class="o">&amp;</span><span class="mh">0x0f00</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">8</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">hexresult</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="nf">hexshow</span><span class="p">((</span><span class="n">i</span><span class="o">&amp;</span><span class="mh">0x00f0</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="mi">4</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">hexresult</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="nf">hexshow</span><span class="p">(</span><span class="n">i</span><span class="o">&amp;</span><span class="mh">0x000f</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(){</span>
</span></span><span class="line"><span class="cl">	<span class="n">System_Control_00</span> <span class="o">=</span> <span class="p">(</span> <span class="n">System_Control_00</span> <span class="o">|</span> <span class="mh">0x000E</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">System_Control_04</span> <span class="o">=</span> <span class="p">(</span> <span class="n">System_Control_04</span> <span class="o">|</span> <span class="mh">0x0001</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="nf">InitialLCD</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">	<span class="nf">WriteIns</span><span class="p">(</span><span class="mh">0x8000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="nf">DRV_UartInitial</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">screen</span><span class="p">[</span><span class="n">framesize</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="n">disobj</span> <span class="n">obj0</span><span class="p">,</span><span class="n">obj1</span><span class="p">,</span><span class="n">obj2</span><span class="p">,</span><span class="o">*</span><span class="n">s</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">initdisobj</span><span class="p">(</span><span class="o">&amp;</span><span class="n">obj0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">initdisobj</span><span class="p">(</span><span class="o">&amp;</span><span class="n">obj1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">initdisobj</span><span class="p">(</span><span class="o">&amp;</span><span class="n">obj2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">setdisobj</span><span class="p">(</span><span class="o">&amp;</span><span class="n">obj0</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="n">hight</span><span class="o">-</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="n">role</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">setdisobj</span><span class="p">(</span><span class="o">&amp;</span><span class="n">obj1</span><span class="p">,</span><span class="n">len</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="n">hight</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="n">cactus</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">setdisobj</span><span class="p">(</span><span class="o">&amp;</span><span class="n">obj2</span><span class="p">,</span><span class="n">len</span><span class="p">,</span><span class="n">hight</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="n">cactus</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">s</span><span class="o">=&amp;</span><span class="n">obj0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">obj0</span><span class="p">.</span><span class="n">next</span><span class="o">=&amp;</span><span class="n">obj1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//obj1.next=&amp;obj2;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    	<span class="nf">scanner</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">len</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    	<span class="nf">layout</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">s</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    	<span class="nf">showframe</span><span class="p">(</span><span class="n">screen</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    	<span class="nf">DRV_Putstr</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\n\n\n\n\n\r</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    	<span class="nf">KeyScan</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    	<span class="k">if</span><span class="p">(</span><span class="nf">GetKeyScanV</span><span class="p">()</span><span class="o">==</span><span class="mh">0xE7</span> <span class="o">&amp;&amp;</span> <span class="n">djmp</span><span class="o">&lt;=</span><span class="mi">0</span> <span class="p">){</span>
</span></span><span class="line"><span class="cl">    		<span class="n">djmp</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    		<span class="n">dderect</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    	<span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nf">GetKeyScanV</span><span class="p">()</span><span class="o">==</span><span class="mh">0xEB</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    		<span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    			<span class="k">if</span><span class="p">(</span><span class="nf">GetKeyScanV</span><span class="p">()</span><span class="o">==</span> <span class="mh">0xED</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    				<span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    			<span class="p">}</span>
</span></span><span class="line"><span class="cl">    			<span class="nf">KeyScan</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    		<span class="p">}</span>
</span></span><span class="line"><span class="cl">    	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    	<span class="k">if</span><span class="p">(</span><span class="n">djmp</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    		<span class="k">if</span><span class="p">(</span><span class="n">dderect</span><span class="o">==</span><span class="mi">0</span> <span class="o">&amp;&amp;</span><span class="n">djmp</span><span class="o">&lt;=</span><span class="mi">15</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    			<span class="n">djmp</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    			<span class="n">obj0</span><span class="p">.</span><span class="n">py</span><span class="o">=</span><span class="n">hight</span><span class="o">-</span><span class="p">(</span><span class="mi">7</span><span class="o">+</span><span class="n">djmp</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    		<span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">dderect</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    			<span class="n">dderect</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    			<span class="n">djmp</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    			<span class="n">obj0</span><span class="p">.</span><span class="n">py</span><span class="o">=</span><span class="n">hight</span><span class="o">-</span><span class="p">(</span><span class="mi">7</span><span class="o">+</span><span class="n">djmp</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    		<span class="p">}</span><span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">dderect</span><span class="o">==</span><span class="mi">1</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    			<span class="n">djmp</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    			<span class="n">obj0</span><span class="p">.</span><span class="n">py</span><span class="o">=</span><span class="n">hight</span><span class="o">-</span><span class="p">(</span><span class="mi">7</span><span class="o">+</span><span class="n">djmp</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    		<span class="p">}</span>
</span></span><span class="line"><span class="cl">    	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    	<span class="k">if</span><span class="p">(</span><span class="n">djmp</span><span class="o">&lt;</span><span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="n">obj1</span><span class="p">.</span><span class="n">px</span><span class="o">&lt;</span><span class="mi">29</span> <span class="o">&amp;&amp;</span> <span class="n">obj1</span><span class="p">.</span><span class="n">px</span><span class="o">&gt;</span><span class="mi">14</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    		<span class="kt">int</span> <span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    		<span class="nf">DRV_Putstr</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\n\n\n\n\n\r</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    		<span class="k">for</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">k</span><span class="o">&lt;</span><span class="mi">32</span><span class="p">;</span><span class="o">++</span><span class="n">k</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    			<span class="nf">DRV_Putstr</span><span class="p">(</span><span class="s">&#34;game over</span><span class="se">\n\r</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    		<span class="p">}</span>
</span></span><span class="line"><span class="cl">    		<span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">){;}</span>
</span></span><span class="line"><span class="cl">    	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    	<span class="k">if</span><span class="p">(</span><span class="n">obj1</span><span class="p">.</span><span class="n">px</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    		<span class="n">obj1</span><span class="p">.</span><span class="n">px</span><span class="o">=</span><span class="n">len</span><span class="o">-</span><span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    	<span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    		<span class="n">obj1</span><span class="p">.</span><span class="n">px</span><span class="o">-=</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="c1">//end of main loop.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mh">0x0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>

<ul>
<li>frame的單層樹狀結構被改成直接指向char array</li>
<li>所有動態生成的物件，全寫死</li>
</ul>
<h3 id="malloc">malloc
<a class="header-anchor" href="#malloc"></a>
</h3><p><img src="/imgs/img-lazy-loading.gif" data-src="../fd23c98e-2aa8-4fd3-b8d7-d39845d40e4e.jpg" alt=""  />
line 3有什麼問題??
p 呢</p>
<p>所以p是亂數??
是0</p>
<p>具規格書，那是保留，所以是0囉??
<img src="/imgs/img-lazy-loading.gif" data-src="../24895634-b8f4-43c9-8331-67cd59159f5a.jpg" alt=""  />
他會印出大概1000個是長的單一字元，可是我Uart一次只能送一個ascii
我每印一個char就加一個等號
我是應為她每次多差不多才發現的，她系統資源完全裸奔</p>
<p>這就是魔法</p>
<h3 id="記憶體超界">記憶體超界
<a class="header-anchor" href="#%e8%a8%98%e6%86%b6%e9%ab%94%e8%b6%85%e7%95%8c"></a>
</h3><p>他只有4096bit不小心超出去會停機
他後面是flash，我還不知道可不可以存取</p>
<h3 id="uart-buffer">Uart buffer
<a class="header-anchor" href="#uart-buffer"></a>
</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-3-1"><a class="lnlinks" href="#hl-3-1"> 1</a>
</span><span class="lnt" id="hl-3-2"><a class="lnlinks" href="#hl-3-2"> 2</a>
</span><span class="lnt" id="hl-3-3"><a class="lnlinks" href="#hl-3-3"> 3</a>
</span><span class="lnt" id="hl-3-4"><a class="lnlinks" href="#hl-3-4"> 4</a>
</span><span class="lnt" id="hl-3-5"><a class="lnlinks" href="#hl-3-5"> 5</a>
</span><span class="lnt" id="hl-3-6"><a class="lnlinks" href="#hl-3-6"> 6</a>
</span><span class="lnt" id="hl-3-7"><a class="lnlinks" href="#hl-3-7"> 7</a>
</span><span class="lnt" id="hl-3-8"><a class="lnlinks" href="#hl-3-8"> 8</a>
</span><span class="lnt" id="hl-3-9"><a class="lnlinks" href="#hl-3-9"> 9</a>
</span><span class="lnt" id="hl-3-10"><a class="lnlinks" href="#hl-3-10">10</a>
</span><span class="lnt" id="hl-3-11"><a class="lnlinks" href="#hl-3-11">11</a>
</span><span class="lnt" id="hl-3-12"><a class="lnlinks" href="#hl-3-12">12</a>
</span><span class="lnt" id="hl-3-13"><a class="lnlinks" href="#hl-3-13">13</a>
</span><span class="lnt" id="hl-3-14"><a class="lnlinks" href="#hl-3-14">14</a>
</span><span class="lnt" id="hl-3-15"><a class="lnlinks" href="#hl-3-15">15</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-C" data-lang="C"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">showframe</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">f</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">hight</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">len</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">        	<span class="nf">DRV_PutChar</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="p">(</span><span class="n">len</span><span class="o">+</span><span class="n">signoff</span><span class="p">)</span><span class="o">*</span><span class="n">i</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="nf">DRV_PutChar</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">DRV_PutChar</span><span class="p">(</span><span class="sc">&#39;\r&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nf">delay1</span><span class="p">(</span><span class="mh">0xffff</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="mi">64</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
</span></span><span class="line"><span class="cl">    	<span class="nf">delay1</span><span class="p">(</span><span class="mh">0xffff</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>
</div>
</div>

<p>板子的Uart buffer不夠大，要延遲一下
傳送檢查的bit只是寫buffer</p>
<h3 id="使用零件-1">使用零件
<a class="header-anchor" href="#%e4%bd%bf%e7%94%a8%e9%9b%b6%e4%bb%b6-1"></a>
</h3><p>Uart</p>
<h2 id="修課心得">修課心得
<a class="header-anchor" href="#%e4%bf%ae%e8%aa%b2%e5%bf%83%e5%be%97"></a>
</h2><p>OS很偉大，真的
完程度大概有六成，至少不是屍體</p>


    </div>
    <footer class="post-footer">
      


<div class="post-tags">
  
    <a href="/tags/cs/embedded/">
    CS/Embedded
  </a>
  
</div>



  

<hr/>






<div class="post-copyright">
  <img src="/imgs/cc/cc.svg" width="75" height="75" align="right" alt="共享知識"/>
  <ul>
    <li class="post-copyright-title">
      <strong>文章標題：</strong>
      Microprocessor Term Report.md
    </li>
    <li class="post-copyright-author">
      
        <strong>本文作者： </strong>
        EricChen
      
    </li>
    <li class="post-copyright-link">
       
        <strong>本文鏈接：</strong>
        <a id="post-cr-link" href="//localhost:1414///blog.ericchen.name/post/96261f31-fdc3-45f8-ad11-bbc09aeee70c/" title="Microprocessor Term Report.md">//localhost:1414///blog.ericchen.name/post/96261f31-fdc3-45f8-ad11-bbc09aeee70c/</a>
      
    </li>
    <li class="post-copyright-license">
      <strong>版權聲明： </strong>
      
      
      本博客所有文章除特別聲明外，均採用 <i class="fab fa-fw fa-creative-commons"></i><a target='_blank' href='https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh'>BY-NC-SA</a> 許可協議。轉載請註明出處！
    </li>
  </ul>
</div>




  <div class="followme">
  <span>歡迎關注我的其它發布渠道</span>
  <div class="social-list">
    
    
    
    
    
    <div class="social-item">
        <a target="_blank" class="social-link" href="/rss.xml">
          <span class="icon">
            <i class="fa fa-rss"></i>
          </span>
          <span class="label">RSS</span>
        </a>
      </div>
    
  </div>
</div>



<div class="post-nav">
  <div class="post-nav-next post-nav-item">
    
    <a href="/blog.ericchen.name/post/aa7ff1f2-c938-416e-b289-166a88e620d5/" rel="next" title="Microprocessor Mid-term Project.md">
      <i class="fa fa-chevron-left"></i> Microprocessor Mid-term Project.md
    </a>
    
  </div>
  <div class="post-nav-prev post-nav-item">
    
    <a href="/blog.ericchen.name/post/32af59e2-0a8d-4fbc-aff6-ac3182abac8a/" rel="prev" title="c語言教學.md">
      c語言教學.md
      <i class="fa fa-chevron-right"></i>
    </a>
    
  </div>
</div>



    </footer>
  </article>
</div>

      
    </div>
  </main>
  <footer class="footer">
    <div class="footer-inner">
      
<div id="i18n-translate" class="i18n-translate">
  <i class="fa fa-language"></i>
  <div id="lang-select" class="lang-select">
    <div id="lang-selected" class="selected-option">
      <span class="flag-icon flag-icon-zh-tw"></span>
      <span class="selected-language">繁體中文</span>
      <i class="fa fa-chevron-down"></i>
    </div>
    <div id="lang-options" class="lang-options">
      
      
      
        <div class="lang-option" lang-code="zh-tw" lang-name="繁體中文" lang-url="/blog.ericchen.name/post/96261f31-fdc3-45f8-ad11-bbc09aeee70c/">
          <span class="flag-icon flag-icon-zh-tw"></span>
          <span class="lang-name">繁體中文</span>
        </div>
      
      
    </div>
  </div>
</div>

      
<div class="copyright">
  &copy;
  <span itemprop="copyrightYear">
    
    
    
    2021 - 2025
    
    
  </span>
  <span class="with-love">
    <i class="fa fa-copyright"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">EricChen</span>
</div>

<div class="powered-by">
  
  %!(EXTRA string=<a href='https://gohugo.io' title='0.143.1' target='_blank'>Hugo</a> &amp; <a href='https://github.com/hugo-next/hugo-theme-next' title='4.7.2' target='_blank'>Hugo NexT.Muse</a>)
</div>





 





    </div>
  </footer>
  





















  
    
    
    
  



  








<script class="next-config" data-name="page" type="application/json">{"clipboard":{"js":{"file":"dist/clipboard.min.js","name":"clipboard","version":"2.0.11"}},"comments":false,"expired":false,"isHome":false,"isPage":true,"path":"96261f31-fdc3-45f8-ad11-bbc09aeee70c","permalink":"//localhost:1414///blog.ericchen.name/post/96261f31-fdc3-45f8-ad11-bbc09aeee70c/","title":"Microprocessor Term Report.md","toc":true,"waline3":{"pagecnt":{"alias":"@waline/client","alias_name":"waline","file":"dist/pageview.js","name":"pageview","version":"3.3.0"}}}</script>
  



 
  
  <script type="text/javascript" src="//localhost:1414///blog.ericchen.name/js/3rd/animejs/3.2.2/anime.min.js" crossorigin="anonymous" defer></script>
 
  
  <script type="text/javascript" src="//localhost:1414///blog.ericchen.name/js/3rd/viewerjs/1.11.6/viewer.min.js" crossorigin="anonymous" defer></script>


<script class="next-config" data-name="main" type="application/json">{"bookmark":{"color":"#222","enable":false,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"//localhost:1414///blog.ericchen.name/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小時前","ds_hours":" 小時 ","ds_just":"剛剛","ds_min":" 分鐘前","ds_mins":" 分鐘","ds_month":" 個月前","ds_years":" 年 ","empty":"沒有找到任何搜索結果：${query}","hits":"找到 ${hits} 個搜索結果","hits_time":"找到 ${hits} 個搜索結果（用時 ${time} 毫秒）","placeholder":"搜索..."},"isMultiLang":true,"lang":"zh-TW","lazyload":false,"localSearch":{"enable":true,"limit":1000,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":false,"plugin":"waline3"},"views":{"enable":true,"plugin":"waline3"}},"root":"/","scheme":"Muse","share":{"addtoany":{"js":"https://static.addtoany.com/menu/page.js","locale":"zh-TW","num":8},"enable":false},"sidebar":{"display":"post","offset":12,"padding":18,"position":"right","width":264},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"//localhost:1414///blog.ericchen.name/js/3rd"}},"version":"4.7.2","waline3":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o 可用快捷键选取表情符号：😀😄😁🥳👻👽👀🚄 (Window系统：Win+.，Mac系统：Control+Command+Space)","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"search":true,"serverurl":"https://walinejs.comment.lithub.cc","sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.min.css","name":"waline","version":"3.3.0"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"3.3.0"}}}</script>


























  





  
  


  
  


















  





<script type="text/javascript" src="///blog.ericchen.name/js/main.js?=1741873170" defer></script>





  







<script type="text/javascript" src="///blog.ericchen.name/js/clipboard.js?=1741873171" defer></script>












</body>

</html>